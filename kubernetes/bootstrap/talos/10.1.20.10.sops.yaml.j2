version: v1alpha1
debug: false
persist: true
machine:
  type: controlplane
  token: ENC[AES256_GCM,data:cbOPysNc7WFb4O86jM0Kimh7Ob5z4pc=,iv:3sLh18HrdN8BD2H54LS/PPPCriVeh6til/MypWDPYVQ=,tag:GrQ4RA10a59LDSGjtCSYqQ==,type:str]
  ca:
    crt: ENC[AES256_GCM,data:B2uSv8rWQAH3JuBMspJLmzsVjTuq6DgcExBtuGHHjiWpBiGnlNfJvm93D4pJ9A60IxgeJzyzv+1QL/fUMCycjbcZF43IlcHkEnEqe4KWgxV5aA/GNGWTtcHYcKXBiiOMYsCOJyYbjSbxza7/bC8ZbV2YaSALovLoZNoQfXAePeip82v0/z8BhoI15Z5W1AMqPDLmBTQs+07Vr9+59NIHHVt3Q4/AQCFh+YH01lcghK9KTyhyIGcOslsJkFCVMdnl3q8wM9iWfJDq0TCgOQa9GWLU4Yk3R18J2wgwjEP/xF8rJTmbWISYggngMyufE4Pdk3lP7pSvGvJM3D7YxjSf6q5xWr2XKQikwTbbur/4AR9UR7eavAOKroLNdGt/f1yimfpA7GWhFJVL/PXl8zg4ZLVCKnaNqHmKcAvi+MWQqp2HqZoyJrmJKzWFXeSQqX/ONa2kb99YT5sgvSkgOwZFeIjES5Yc9rjYmLV2XaxeFMYv/awADe9s1TCfk9wr6pcJWbB6Z2LJ7wyhhamot7PudS+WfzYoGOoXGI4tKcJFdB8M1FIFdj41YHFrC3fZ9ocCQJD9i1QUzTV/G+5Tpd0ruy5mNrjI9svl6e4E5GT546BJaLEyRkQZtMOxIyF9QpAsTBWYgajq757Yy7JPTN84oRyNYLzQM7A+bNzC8pcv1TbHOulQDxPNVwpeO3oiU8aUc0/Wc6ZM8qjVjzdNmmYBgU162g1WMX2mdLUIRlpYNdisRPWO/qcUAOJtEfUY5MusmeNNlsAdJgPXW0eLPbie/DTxzLdrFYc+QJhJcP7smmmapyxUdhZ9RfFSnRHmU1ACVvWrxVM23vjyKx7EV8zPIBwmQvE6CFY9zMXjNjq1+1xws3/J,iv:MpfR1pM8bCrkKo0t51rZlulF6ICweUOhfbEWRoQUwK8=,tag:hcpfTSmLrQwv/C7kSbPvag==,type:str]
    key: ENC[AES256_GCM,data:BMrm/6pgk9FcbpRfllL1tH6mRxxF22ejVegy+VsbKauSWq2qGvBSkfCOeRgNp4dACMs2op7eeRaBZqHLC3lYWkjyUqwL72FvV4E/TK0i2BuDWa/+9mAUOTPWYXHbeaJrEm+EN/32SFWoXyjYdes+QtyNoMAGoytkgdWCzRxxFEOtxoiEi43VVEN3l1jDsbgYsKiDqJOqj0QtSuyJhzHGljxiT66QzKM+19mkVqxKVwDbP0L7,iv:qoG8NhPsOii8t26h+RWBPd6t2krEs0DzCNGqcWBoaec=,tag:6YqRtk0KY19kLbLrZn5Q7g==,type:str]
  certSANs:
    - 127.0.0.1
    - 10.1.20.120
  kubelet:
    image: ghcr.io/siderolabs/kubelet:{{ ENV.KUBERNETES_VERSION }}
    extraArgs:
      runtime-config: admissionregistration.k8s.io/v1alpha1=true
      feature-gates: MutatingAdmissionPolicy=true
    extraConfig:
      maxPods: 150
    extraMounts:
      - destination: /var/mnt/extra
        type: bind
        source: /var/mnt/extra
        options:
          - bind
          - rshared
          - rw
    defaultRuntimeSeccompProfileEnabled: true
  network:
    nameservers:
      - 10.1.20.1
      - 10.1.20.43
    hostname: k8s-0
    interfaces:
      - interface: eth0
        dhcp: false
        mtu: 9000
        addresses:
          - 10.1.20.10/24
        routes:
          - network: 0.0.0.0/0
            gateway: 10.1.20.1
        vip:
          ip: 10.1.20.120
        vlans:
          # Trusted Network
          - vlanId: 40
            dhcp: false
            mtu: 1500
    disableSearchDomain: true
  time:
    servers:
      - 10.1.20.1
  install:
    disk: /dev/nvme0n1
    extraKernelArgs:
      # Use eth0 instead of eno1
      - net.ifnames=0
      # Less security, faster puter
      - apparmor=0
      # Less security, faster puter
      - init_on_alloc=0
      # Less security, faster puter
      - init_on_free=0
      # PCI Passthrough
      - intel_iommu=on
      # PCI Passthrough
      - iommu=pt
      # Less security, faster puter
      - mitigations=off
      # Less security, faster puter
      - security=none
    # gasket, mei, intel ucode, i915 driver
    image: factory.talos.dev/installer/6e6f23cd5ca6099bbe4be57a2218f628e61314545d5da36dcc6516c59d3be64f:{{ ENV.TALOS_VERSION }}
    wipe: false
  files:
    - op: create
      path: /etc/cri/conf.d/20-customization.part
      content: |
        [plugins."io.containerd.cri.v1.images"]
          discard_unpacked_layers = false
    - op: overwrite
      path: /etc/nfsmount.conf
      permissions: 420
      content: |
        [ NFSMount_Global_Options ]
        nfsvers=4.2
        hard=True
        nconnect=16
        noatime=True
  sysctls:
    # Watchdog
    fs.inotify.max_user_instances: 8192
    # Watchdog
    fs.inotify.max_user_watches: 1048576
    # Cloudflared / QUIC
    net.core.rmem_max: 67108864
    # Cloudflared / QUIC
    net.core.wmem_max: 67108864
    # 1Gb/s
    net.core.default_qdisc: fq
    # 1Gb/s | Jumbo frames
    net.ipv4.tcp_mtu_probing: 1
    net.ipv4.tcp_congestion_control: bbr
    # 1Gb/s
    net.ipv4.tcp_window_scaling: 1
    # postgresql
    vm.nr_hugepages: 1024
  sysfs:
    devices.system.cpu.intel_pstate.hwp_dynamic_boost: 1
    devices.system.cpu.cpu0.cpufreq.energy_performance_preference: balance_performance
    devices.system.cpu.cpu1.cpufreq.energy_performance_preference: balance_performance
    devices.system.cpu.cpu2.cpufreq.energy_performance_preference: balance_performance
    devices.system.cpu.cpu3.cpufreq.energy_performance_preference: balance_performance
  features:
    rbac: true
    stableHostname: true
    kubernetesTalosAPIAccess:
      enabled: true
      allowedRoles:
        - os:admin
      allowedKubernetesNamespaces:
        - system-upgrade
        - actions-runner-system
    apidCheckExtKeyUsage: true
    diskQuotaSupport: true
    kubePrism:
      enabled: true
      port: 7445
    hostDNS:
      enabled: true
      resolveMemberNames: true
      forwardKubeDNSToHost: false
  udev:
    rules:
      # Thunderbolt
      - ACTION=="add", SUBSYSTEM=="thunderbolt", ATTR{authorized}=="0", ATTR{authorized}="1"
      # Coral Edge M.2 TPU
      - SUBSYSTEM=="apex", KERNEL=="apex*", GROUP="44", MODE="0660"
      # Intel GPU
      - SUBSYSTEM=="drm", KERNEL=="renderD*", GROUP="44", MODE="0660"
  nodeLabels:
    topology.kubernetes.io/region: main
    topology.kubernetes.io/zone: m
cluster:
  id: ENC[AES256_GCM,data:dd+Qq2SJQGVQ/4rIj/fitUYFb73c7kkMrN4EUN8P1q4cPUSP9wquZ8DaJSo=,iv:GKNhKNngrkKUwOR+roLR2WcOFi3hk/aA7ISxbHGgjl8=,tag:7RJQjjradHJDlzQ5VLoJyQ==,type:str]
  secret: ENC[AES256_GCM,data:iE/dPSSdsrGW9XBRSgrWmZTJRMjEtMzx60YiFpjXz5TiYMeb7InW0WInHfw=,iv:z9m6ENTHe/rZUvfmJm+P9c05Ypmd6CYeS0hN1h5s1e4=,tag:9WH9E+dYkBubhK1FB6sKSA==,type:str]
  controlPlane:
    endpoint: https://10.1.20.120:6443
  clusterName: main
  network:
    cni:
      name: none
    dnsDomain: cluster.local
    podSubnets:
      - 10.42.0.0/16
    serviceSubnets:
      - 10.43.0.0/16
  coreDNS:
    disabled: true
  token: ENC[AES256_GCM,data:DSGRNO/be2o8Bd68J1SpftI17iL450I=,iv:BGJ8fhvrh+W4L77G8rVECXtMPHPFkpU6zvqOPg+RBM0=,tag:gqu+pasPYl55Wkp9135nMQ==,type:str]
  secretboxEncryptionSecret: ENC[AES256_GCM,data:tY0qG1G2c1PO/rt7Rb2ODjdZW/dTFRqAjooNyfN4tX7PsNL65446wrX5VSc=,iv:3tBuz1BbO888J66Y3ghALmZZ5GEMm9R46xLjVmSQQzw=,tag:IIR3vri1WK7IKndSZYb3Eg==,type:str]
  ca:
    crt: ENC[AES256_GCM,data:Fi/W5FIFysJi6Zffj+lLfNpgfn4ODXMp208f/Suz28l9/KatWcd4+ZdiDtJTbJ70ZtmVSdQ/h5ks8mSpTHqhSwk/ItuCH3NDy4QmATzRYjEjmij7IVCVdlOb0ErO48/kBaSvteBpS0sJD2GG0vIW+bGEDVV66gChSxVRNgZGrO51Mz8Qjnvv9fxNGwyPunaBuW+DIMFN2Q4/e9AWK3DzfHIHCW3fm4QtihAKUSyXL4RVAavJHIVgPicgr9i9joe/PeR9OoHqtF05A2A1PvDTGpzO/z+f20MOBxUMjsKraDam0Vw9+o8nUvafAraVCcSKItty6cNaYC/5mzQjXdfGZVDcgo1YJeCB/U/1p7bF/e+w++hT8P1uJSJhtZKuQRnhC99TboqKJuDQY8et07Rz2Z6U5MJ0oMBd3PD3GETxoJLRpgGC8eeZAGWYa5BE2bzK8YjHahGD7PYldr8OQluvtDY8w1R7J/zY7DWBGNPS0ul6u5nbI7EF7wTDGPN6YOxPI423Wy9EW1/vviqhEcUsbCO1q8tQLSPYueBcifmk7I80lh3xruJUcEAKpEGRknZn1LY1ouBOiUB/zIH2uXEKVtcAVkUET6A1+ETjxImsVnhN+MMMp1dVfUfbOxNXyQjvNMUsXR5MzGSkT3OmnYjz2GSEliX2RE20V6GiOfLSOXW7hwrnbx+OMjVfUS2bHCi9C37jKAH83fCLyp63XtQXCsF9td6RcC1FXyK2D8KG8bKtrnC5mbmT3EAtolAuSkLNcBmtSi2E76RU2lfHpy1jBbiZ544DWdgHpMeZ1X8Yb+9v0phtkYf7LA0ZHFnbLvmummE9IW/V4IK/P+OAnvsv719df0n3vzGA1TTfOXAVbLttE8z1+eYIHDmB3vwBRvPqElzddKQ7jMFxUYGno03Lu9kH33/fESMkQhsotXsC1gp2RIhhjTehYIdAc/NLpB17sPA0tgIdFRUV9MjrypGFzpgLFhOguEsN7WQGZwOspacgYtZcfm5vysY9uC4BYdexCAU9nL/cKBvusZuTb1J/RXhDUkc=,iv:dykZYTLPbI8+Vr8o0EjvPLUtC727e3S2MR4BQ4YICno=,tag:s1WO8RmFbr4ZOTTlNu63yw==,type:str]
    key: ENC[AES256_GCM,data:cWHW8i15jzdV+44SDpkkRuj5gn4q2tdVu8DdecQhVuP4VI/zyElZvUqTTPipqGPPnq74e0Pst92AERr815kZ0OLyZgfo2bVQzsJRFE/c5zXa2hOYOAR0uqNIKG5U47zjcFDFyFLC9gXb5J3Y9A68TA3U6c4pPBe9wpbzXMsVClfM0gzNWYl3HIzl55qPi+Fsaqb6r7fb01oV4/FoKxF+xZI6vIFyR0qjZqPJrgzDCcMK1EpsOrdAow+QTwsA1kjaYfmpQVdSfJCyIwC5Fdm8roB+RvC8W8yI73wgNcKyuHIXx7cw1UAx1mnhNa6HU5lfrLLMcSBlA5+MBQnxgIM82Vbjs4S7xD+fbL8Drq86rIH/27hzVjzzN7kIcUxrAr/YLTDrjaaCezn0beQMhzgimQ==,iv:JhTIKOAsqFVUenzIZKpjVMzSmMI7P6DqwDgfSpG3g90=,tag:bd3DHNVzSYVB8fsx+O1mqQ==,type:str]
  aggregatorCA:
    crt: ENC[AES256_GCM,data:ZDXELZja/YvXRTGO/Dy0rnfUWv3iWKA6uSWEjlkulaVB6PgItJomA+NNgHgbDDdcCBEpPHOKGeWUFrQWDxnCiR/LHeVitoTGzbNsmpZ0uOQZeR0uuz05fzxpV41ZdVVOmiWSnKfEC0kQxe+Rg2bCcjtXA1tjXR9ySXK/sx0cEBgE1Q5T0fMoCRvTRGaDuHZl/uimMDXQp0U8X8Job/BlL7O/4wCzc54TdgWDL3TnmV8eDgwFf1GBuNI4Kh+/4PWd8vdhm9zibN9ovB8U+noqaZK1wjiecXazkSiEtHrOLchEB1kpxKRAGgKhGo4Cbik6m0FZlTMqhuCDkv+LnLKkPdep+x0R9p/2SkmkCeVykfNljzn15nOStuvmxuyAG1UpH/EQXGod3b6GaSbni7kwRvyMrvhfVV6ymk8qDSlmkyv9nFIaJsvQ8tQFdJho3Twz7k0tz6KiWFLaAEArzkr230L9XOSIZ1j8h/BegVqkLQaXJCJunFUJGqGI42046zbzacAYqLWWWWmgeVgxvedPa8itVqerKH7s/IlUPOTkKLoRHpqriNS3uJey0rS9iUCNNThVyWtBw8qKIR/x/bkR0OyTPlbT2xPhsU8n5B6fLpnZ99bEc2+TiTJ9Lt4KSwFPdOCP+fpPO10HyyGp+yKwNI4HJ7AnkElnrjy5Z07ioQhGG8WicVgf42DospjFX/8eF190JHiU+puChhzyHJ1s/8VMJMfFGWS9GjrJFqelXys+JxgQ55SSutTwB2a7J9aMSg6QIgMuUFMDDfmAWt4MNNUP0+EjSiaF/FsAz5GerIqiggbIiVLaLZoQHEgmShQHVfYqsAtlBLXNvmmdu2EaFdlIYWQdPAfHhdCwkhxJzBv3zkK4fR+BIKIwsnBcAUoiwV5N9YNhjsaDuXu3XkwKeHKapgugQB3fVawYQKU+gtc4uR9rvrQQ7g2SGi5WPqO9,iv:qAoUDw1nkbMaum1nKbh1EcQ/+pm+r8g1vbtOd0oJSHA=,tag:iEctQvu7kztBeaRF2jOR8A==,type:str]
    key: ENC[AES256_GCM,data:h2lu3wcly4owdnShuBvNuvBqNEpWPbgwqqvS3+Y8c8+63+IyF2pHnSCF69on6dkeAJ7dgghjkoIlZS36KJGcO56khi5du/mZm1pS6LzjwyLOzQIaRlv/Ou12WraQoWFMgBfux/zXcFZB50TVyWhBV7CIqJfAZDRI3NFDvW0nncLB3QmTiaAlMA2BJdMN/E3pr1QBf4jhhnJhMtTrjShLPtu369nbsK68k/3L0OJnlWTyWOADrrTxR0iH7cp8fBlf4lUagc7FLnJuwsxIRAxta0GBeqH6vjxW8AWPq/I+F/9oQTiPOLgSapXgry70h7+BRTY0u+1GOyamxt03QkYz1YB1cp85E1JHcS+7HiEklny+i/OJZh0ZNr8dIOyijQvAaRY2CnZhbOZLaBuef/fCIg==,iv:mQMDUncO1KbVWt2Wvd/scdBJBMjL07TeL9q9L0BQ0rQ=,tag:O1R7OqKGu342yxg53r+tZA==,type:str]
  serviceAccount:
    key: ENC[AES256_GCM,data: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,iv:q4c6BpoXmVViYOPINLvlEzxeo0AhVKR0AADcpbxnmbw=,tag:2jfdZGs1WWpIZAY/AVpt5g==,type:str]
  apiServer:
    image: registry.k8s.io/kube-apiserver:{{ ENV.KUBERNETES_VERSION }}
    extraArgs:
      runtime-config: admissionregistration.k8s.io/v1alpha1=true
      feature-gates: MutatingAdmissionPolicy=true
    certSANs:
      - 127.0.0.1
      - 10.1.20.120
    disablePodSecurityPolicy: true
    auditPolicy:
      apiVersion: audit.k8s.io/v1
      kind: Policy
      rules:
        - level: Metadata
  controllerManager:
    image: registry.k8s.io/kube-controller-manager:{{ ENV.KUBERNETES_VERSION }}
    extraArgs:
      bind-address: 0.0.0.0
  proxy:
    disabled: true
  scheduler:
    image: registry.k8s.io/kube-scheduler:{{ ENV.KUBERNETES_VERSION }}
    extraArgs:
      bind-address: 0.0.0.0
    config:
      apiVersion: kubescheduler.config.k8s.io/v1
      kind: KubeSchedulerConfiguration
      profiles:
        - schedulerName: default-scheduler
          plugins:
            score:
              disabled:
                - name: ImageLocality
          pluginConfig:
            - name: PodTopologySpread
              args:
                defaultingType: List
                defaultConstraints:
                  - maxSkew: 1
                    topologyKey: kubernetes.io/hostname
                    whenUnsatisfiable: ScheduleAnyway
  discovery:
    enabled: true
    registries:
      kubernetes:
        disabled: false
      service:
        disabled: true
  etcd:
    ca:
      crt: ENC[AES256_GCM,data:aDGddDhyy6D366/y9Ndx1rhA3s2DIdX/TEPTq1/1DkbtUlYLWR86NJr6xZizGXYT06mCXqA3lh00K0sJpibdwP+XRm65NRgJML/5SGCkVmBDmEXA9mddwL933Mi/03Wl6ccqnTOhGhl0Mq/1sReZ4cxKmUGrO7EYl9R1EOwDZzGD1rHS0P4NmAShnLsXGDFvavoagW0Egq2QKR0bGCgC8v0yXQzd+XhhrBBcS65TjxUQLg5JFmVaZBmWFUaq56q/bgHizyZaW/wVM1mUfw554CUzyFSdSX8bHkbSF6YEWWRPzR+xPvg7IGJfl43yrmNB9c8jn+ptjSTNTH9fmfgoQIofYDOIDekBVMTSDiNlI/YMrEuXlbuLI+bVFs8Vp8CK4SqjnPX8xV58WS3WNNNbgQZvA5yhfC1O+K0Tky5D+0yNQKV0/7adBwxlc8CerPOYPvP0EHibp7UzyFo46Cdy463VG+4RfKc5CN5M3NtfMjUo6MrtusDKSa1hl7e99uyEBWNVo6U5OViInPv3xUyvzpqB4SlzAsg1QhCK/vzsb7FsdaEB9eIIpIUDe/B9eL/AxQzDEaMr3MQ4x2RT8fwsH1liy4iRkdwbmRU3j9CmY7Tzenb+E+z0wgxgKVF5T1GS/V1OYwr8yZCsev8CkEa6Z1i1IQcWOGV+0WlxPAVvoRRpHQ2XYrl4wwUbzAYk2cU9hcFIgv3FUzrKjzc3KkNPxVCY//nj0S0wq2DHPVwZ5rxpii0iAhVWuEMcjbUNnsNPs4MCxVmZHKvJ+/hIxmZXlxAAiXbwOUOPP2WRzivS/+QNu37/KIa9jhoeC9wL0h18c6LoMe9M9mIlCy/4NuzltZu3k+lW71//GdMcIdPy8OJ3a/Dq/pJWChvysLUfoWS3YToW+NSTfwuCPeEcPh10k+7kzPy/r92E1WMTy69Rsnjpaw1x1yt1TqOvtkqicaI5Fsm5rHutO3aJNS/9YZAPAO9D7hpSjmQxLMV8NsROBNYtGRg4/z5s6TlBeHewlk1l,iv:6mh+g1eZHxG9dh9ScWIOkNwLQyRlSkf8lziS0Kh54qU=,tag:j6jdQEXq7OFWZ6ZcmTVchQ==,type:str]
      key: ENC[AES256_GCM,data:hTaQS+KMNWy99sOhbW6iQwae5bbYCa1Haqh1jDesKNoB4S0ZFBF6qlOb6BZTVTQY4TnSQglWz7lIPMqemrVKKHNs+Y5lAQdDMQKAN6Ok4p3PR4NfxVuRgroDo+lWhsGXPpXw9aVLe+paPWrU7L/vW+E9gS9xGFTL33oP+Y7iNq3bO1/HDTvT2z64ecC/nl2AlosNoOlrjdIBpIIjx+cMz4iJOOYM3v3rO1UJMEaLFJR/kX018JbiIOhQ4I1Q/TcIhu2PZwUhO4uu2SrJU+oSE4qa/HKm76KJu4HhxnLaRdXSof4a2Gj0mq2tGYPTmAiXthJn+hzjOGuBCkXIRYdiwUuuxL/Ht0JnHL/DFW95nOHTc1oKzXaa0qzljDF8E4SGcp75e6IltuKEzSzonXNPPw==,iv:cFxHkHcneyei+LbVgb3sOB0NZcT2EYRyKHjXG394w98=,tag:97oWlS9nuF7YqUuGZkOAvg==,type:str]
    extraArgs:
      listen-metrics-urls: http://0.0.0.0:2381
    advertisedSubnets:
      - 10.1.20.0/24
  allowSchedulingOnControlPlanes: true
sops:
  kms: []
  gcp_kms: []
  azure_kv: []
  hc_vault: []
  age:
    - recipient: age1jwm8ccjgfy04r9rwh65rehk72j6rkawkpjnf4rcu4ukwlcfyquhq4p2q23
      enc: |
        -----BEGIN AGE ENCRYPTED FILE-----
        YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBiQVFkblpBM2dZTmpFRW1Q
        TU1OTkdNSHRVVE1XL0Fad0dBWW9lbmg4OXpFCkJGNWdWazZsTTUvaWZYeTRkMzRU
        Y3loT1lNTGFPL2xlTG9tL0hxb0lOVGMKLS0tIHI1U3E2MXpFSnR3c3dvN1V0RlRq
        aktvcVBQYmZlb2pXV25ucHhOOUtQRlkK1UV/GluH/wfZWUHQ4RZj0TpJZmcnZ4Xw
        06MQokzFeUHXy5vKf/zgc71BraHHsvcHatkqEWvRTSlL9OfbIS6prA==
        -----END AGE ENCRYPTED FILE-----
  lastmodified: "2025-01-29T05:00:32Z"
  mac: ENC[AES256_GCM,data:nbUPb7cn3mGGdcT+In50zTTszsUT3xv4ZfTVYkPA0cEEqCN/VodfMhhu09TxRNHiuENLHDTHRCvk0rKCJU2J9fiLWK5+dhjbSMO/0vfR7v3ey0kid+cOsIbOXp5wTtyUyj1ATidpqJiONc1K6YMvR+rwddQZfT5F2dDrtgAUnZo=,iv:Zomuya231AFOF0YxnUW07L5wAOqf3Lvyqw/AElTzzDE=,tag:wGkat/VD09ZBA6jRusNThA==,type:str]
  pgp: []
  encrypted_regex: ^(token|crt|key|id|secret|secretboxEncryptionSecret|ca)$
  mac_only_encrypted: true
  version: 3.9.3
