version: v1alpha1
debug: false
persist: true
machine:
  type: controlplane
  token: ENC[AES256_GCM,data:MOCoGjNKeW7tEjbKVICNFFTCBdmzTyU=,iv:c3un4qWNJG7jdIqK08vqI1MuokTviaLhgDKRTuujZWA=,tag:wPQzytImXoG78mfvO3U+6A==,type:str]
  ca:
    crt: ENC[AES256_GCM,data:3Oie/m9svGeFf6KwQwbZlzbqhFT6citymS1Yg9P8c48/4+zZnOQ0Dh4WhVFcN05v9rQLudm9Tf51xlTvxBEgCZPEXtpaWnitGrRuGWigZ3njrX8TQK4R+89o8tnaQoxrKGIcZpvgNTVPWKNhgd1VKQprv1dKk7CQs3PcfdQAYfAOB5PQThGooZ4qX9LM65qCFAn03F5DEf4sPVkN/cW7xST0dfLVbfCtVugsdwOGv7VO4AcMJET+sloo0BpuXoewuAkYnxWG7XaqoG8eybFO9+pJ3Q2ipr9rnLi7nk3PLH+ehmqyI6HwiB+x5cfphkaErZ/VVkJenVMyCZpR/UKG6eeL94C3KQzkEaQ95tgKofVQoGQHmOYt6J+O4nb4BKzWQ5rC1w/7BL/4aJPdIiV44bEVSnmrSFgz9vmaNBS6ccpJRqH5Vj/1MpwLZ6t1Orlruh3HwTJo8WKDIsYinE9PNOvV/aQ3+EEISrGbaBaNWa8c//QwokoXlW1dMvGe3EWtwmZBGsnO5r5h33W6m/FvBxh6jnuAt0H+TEUoxsl6FFnZqzc1sec0aiGYVJPKRO6T90chtqceElKCIn+Pmi3z85jNR7p0YX4k8U0GQe/NRzb874W10P2VFTBmh5JrP73I5Y3vCY5YeqdeezJCrtTtglsY9NbFD+PFbEv37EWkPtfh2SeGmISo3pR/w1hcciIcXW1QtikEYBLAfmHxXkBkoHlVtfdzMeg/azIH6yLQa65LO+za7gvGldcN9P9dhPR1km1Qvc2BM//CsbCfpzWRBTTFrq8RiFY1prSqTNmaD+lHYbf+PnFICC6gQDAwF+VoqcQOkxrT11rTXPWLe5gpc14DDhQdIb7H3ncPmsXoIgcD2CM1,iv:9u8P5vBaGcN/Hok28KN1/DeyVJY4v4+0aqv5P6zt3Hw=,tag:2eLD/eBCgHVLELp7JHbU7w==,type:str]
    key: ENC[AES256_GCM,data:gzc/rFnsNe8ESy6Bd94x1mhde1ysS+pVLJuIIwX1xISpTGB+bYzD1ZWV0N8axSBf3PZuaZ0YrZADKhOECEmR4OtI24p0M8hOHbjaOUymJkNZawOVUVdoJGVcpxBpDLRVbUdGHlgWUMRfYiBRoIONckXhFI836clFueYOJIi4ZirV9ngTDiNXuZai9hLlutCAMx0UpKkbIp04s2KUQ93r7vjki621TCyxTykiooOzmWhh3WCw,iv:vKw08O2MhbiqGslFNrOGJjGniYABy5mXHUzRgs2HHCQ=,tag:mXhyUs5Lbxdsv157OYqjsA==,type:str]
  certSANs: ["127.0.0.1", "10.1.20.120"]
  kubelet:
    image: ghcr.io/siderolabs/kubelet:{{ ENV.KUBERNETES_VERSION }}
    extraConfig:
      maxPods: 150
    extraMounts:
      - destination: /var/mnt/extra
        type: bind
        source: /var/mnt/extra
        options:
          - bind
          - rshared
          - rw
    defaultRuntimeSeccompProfileEnabled: true
  network:
    nameservers:
      - 10.1.20.1
      - 10.1.20.43
    hostname: k8s-0
    interfaces:
      - interface: eth0
        dhcp: false
        addresses:
          - 10.1.20.10/24
        routes:
          - network: 0.0.0.0/0
            gateway: 10.1.20.1
        mtu: 1500
        vip:
          ip: 10.1.20.120
        vlans:
          # Services Network
          - vlanId: 30
            dhcp: false
            addresses:
              - 10.1.30.10/24
            routes:
              - network: 0.0.0.0/0
                gateway: 10.1.30.1
            mtu: 1500
          # Trusted Network
          - vlanId: 40
            dhcp: false
            addresses:
              - 10.1.40.10/24
            routes:
              - network: 0.0.0.0/0
                gateway: 10.1.40.1
    disableSearchDomain: true
  time:
    servers:
      - 10.1.20.1
  install:
    disk: /dev/nvme0n1
    extraKernelArgs:
      # Use eth0 instead of eno1
      - net.ifnames=0
      # Less security, faster puter
      - apparmor=0
      # Less security, faster puter
      - init_on_alloc=0
      # Less security, faster puter
      - init_on_free=0
      # PCI Passthrough
      - intel_iommu=on
      # PCI Passthrough
      - iommu=pt
      # Less security, faster puter
      - mitigations=off
      # Less security, faster puter
      - security=none
    # gasket, mei, intel ucode, i915 driver
    image: factory.talos.dev/installer/6e6f23cd5ca6099bbe4be57a2218f628e61314545d5da36dcc6516c59d3be64f:{{ ENV.TALOS_VERSION }}
    wipe: false
  files:
    - op: create
      path: /etc/cri/conf.d/20-customization.part
      content: |
        [plugins."io.containerd.cri.v1.images"]
          discard_unpacked_layers = false
    - op: overwrite
      path: /etc/nfsmount.conf
      permissions: 420
      content: |
        [ NFSMount_Global_Options ]
        nfsvers=4.2
        hard=True
        nconnect=16
        noatime=True
  sysctls:
    # Watchdog
    fs.inotify.max_user_instances: 8192
    # Watchdog
    fs.inotify.max_user_watches: 1048576
    # Cloudflared / QUIC
    net.core.rmem_max: 67108864
    # Cloudflared / QUIC
    net.core.wmem_max: 67108864
    # 1Gb/s
    net.core.default_qdisc: fq
    # 1Gb/s | Jumbo frames
    net.ipv4.tcp_mtu_probing: 1
    net.ipv4.tcp_congestion_control: bbr
    # 1Gb/s
    net.ipv4.tcp_window_scaling: 1
    # postgresql
    vm.nr_hugepages: 1024
  # sysfs:
  # devices.system.cpu.intel_pstate.hwp_dynamic_boost: 1
  # devices.system.cpu.cpu0.cpufreq.energy_performance_preference: balance_performance
  # devices.system.cpu.cpu1.cpufreq.energy_performance_preference: balance_performance
  # devices.system.cpu.cpu2.cpufreq.energy_performance_preference: balance_performance
  # devices.system.cpu.cpu3.cpufreq.energy_performance_preference: balance_performance
  features:
    rbac: true
    stableHostname: true
    kubernetesTalosAPIAccess:
      enabled: true
      allowedRoles:
        - os:admin
      allowedKubernetesNamespaces:
        - system-upgrade
        - actions-runner-system
    apidCheckExtKeyUsage: true
    diskQuotaSupport: true
    kubePrism:
      enabled: true
      port: 7445
    hostDNS:
      enabled: true
      resolveMemberNames: true
      forwardKubeDNSToHost: false
  udev:
    rules:
      # Thunderbolt
      - ACTION=="add", SUBSYSTEM=="thunderbolt", ATTR{authorized}=="0", ATTR{authorized}="1"
      # Coral Edge M.2 TPU
      - SUBSYSTEM=="apex", KERNEL=="apex*", GROUP="44", MODE="0660"
      # Intel GPU
      - SUBSYSTEM=="drm", KERNEL=="renderD*", GROUP="44", MODE="0660"
  nodeLabels:
    topology.kubernetes.io/region: main
    topology.kubernetes.io/zone: m
cluster:
  id: ENC[AES256_GCM,data:iUNb+eIK3EuwqUwn8j7YtR+4fhOV9oMg9jCmbOORxbx90355u1TrbvXHBjI=,iv:N+XMWzrAPRO+CUAE57Wt0yVUS81WiNh2jgsDBZ098ro=,tag:RoGkXZIMyLGYXUMR2YBRgA==,type:str]
  secret: ENC[AES256_GCM,data:GmY874Qcfe1XCbf67n3KVqdHdULE3W10ulxoNVe/vXBLaXofkp5FFgVPr3g=,iv:eP0l9LpFwHckYYLybAVMLDvllHua6i3OJQ0rp4MswbM=,tag:MaZr9Fce1JtvKEkYwfRMDA==,type:str]
  controlPlane:
    endpoint: https://10.1.20.120:6443
  clusterName: main
  network:
    cni:
      name: none
    dnsDomain: cluster.local
    podSubnets:
      - 10.42.0.0/16
    serviceSubnets:
      - 10.43.0.0/16
  coreDNS:
    disabled: true
  token: ENC[AES256_GCM,data:vU1sdWDKYbzmCbnD9OIdwZ8Yl+7tAQk=,iv:UnYm3RVKSTw33ZfifCP/eOdO5zM6fcIxpFe1bdbBvxw=,tag:QzX8RylEvlo2lyooWB7Eqw==,type:str]
  secretboxEncryptionSecret: ENC[AES256_GCM,data:lzYix6RgcTmzhVrWGjqKSWAUuJN5mmPJ639LHfDsvR+DMWbybu7o6LD2T90=,iv:oEcfFiUNM/31nJfOX5axmZhDtHtubPuqCaDU05kS5JU=,tag:nDTYx/z1085ZwTzGNFQVQA==,type:str]
  ca:
    crt: ENC[AES256_GCM,data:f9FoaQKbgJ2AEsYIcnRIJ6p1KYkMMMtLb1RbdY0jcpNEfB5/V2FEiAKLyNKN+g79CSzLw/M0eOklG0SW3K+KgJi/JfCIzlzxBmPGRIV90kAswvVTz8iSiCHO0Oh5PZMl+RJLBo0N9rBM0gV8MnJbXr4XI9fLKUKHGFPS3H/i5Q7v8Q9F3UGtt3SVzPPHMvOeHmXX8jyCG9Fn57U4gdd0G6Mj+YQ63VL5YfoJ5lMTxgTYrIUnjmfgW++t8cDr8rtf+87Cr40fUbKiFQjE1GTO56ZNaLQhSXu+0xSBj9CSFF/f5942JRCnhm1ibNaWmvNTET65qosLz4D3APBMPj34WkcbE6QtPc3IIjEyPqC7YX0wUFYsPOG4vq7uCgZIMkaN/BHGS8UjB4GuQxBqjjUaa4VM2zxnlOwdEU8DsOEQSy3MfWxzNRwcx9XBPaBglajgYjGRVZ6+iRzbBAnIPsChRe19k2E+iUdHvsrARL53Sben2mkzn/FnZgxFV5D8XRA7CvJcwGwzWuJ1uzNkfR0pSjX8veuGMLdmWL5BI2m3y7+UkPGYXlOH7kVIQnw7qdFFFI3OmI3xFkuKVGhZBnLGoUw82Exg+/gJfwQdC07nYsfrVZ8tTD/cPdjnwroTMx64zTbdenztz5mTFi6w/esC2piEHlvZEa8jdfgsRD0rySmVw+xUUWuexTTe1BG1geK3+P+skV2ERRPxp2tDevT3/91Rd1cOsu9oTCeUlQM7Demaaa6fuk/Rjl91yna1ov20YhEB0Zqn2XbP8x1PcU9Wdxhvs/qXt2h2aC54bqo+IUY0uTsEWiqQYhyoRCX7Ii9fASyCmidGNTVlq3SLnmA8LzTm3BqCD9TgYAR2/a9h8WR78HdTGP3j31mwJ8reZzRRKwrvAh86087X15mEvsJk5GXsHAHweOvPP76uRdk7dDmbLO2cziLrSZs/YuindiQRo38G2JPIirzQ3NMLsqH9QQa9FG0Dgt9BQZC9Pal/o7OfxmSmWAEi++y4Z6JaCysqHjupYj/oDzDdVNHIBnZYow8jnPo=,iv:DyMAp8IbrqbmJWmnLYsFbCNbJGAtCSYIAYzqyZVLUzw=,tag:nw0WyyLG/ae+G3LOT+tWRQ==,type:str]
    key: ENC[AES256_GCM,data:xfsEHoAZGYktdm+Jy6uAJ3if7oDSsX+27HhDVXYPn2p93c/4M7vXXO9sCw4WT4tXQXysL4XTzBU9duSOIVzVKbJC0zmIPHjHZSttv3Ss70ozELaUOpe5ZAnD2FP5qGBFpvr7LU5Qt3gct6biv1T0b51MEWcBXZpgY5b1nEbop+Xw3wZmUOqmm/qikz2ZAlmXcn8AlxyZTRgrjmXddjSzIZ1GK57BOjoDPRfhBb6Oz6ny5eYtkHdw9axHXIIqH7TOAMKcduqNwEpba1Dqp7QdNyqRH51IkO+ptYBdTbDhoEsnAABY+t+QBzj/ynBnGi+gUA3L6sTBVsz2sYtomlQZCQX2MvZVc0PVlqH40W8Jd3hpwgBBhYXdnGXXMCvM2nHZ6BhYu934ZJsDMF/lZ5vuwQ==,iv:Xza2R08jzRDxhIC/BkICgegyQq2wCgP4W9OCljGcaDg=,tag:KfUL3Zh7M6uR6mFTIa0k0g==,type:str]
  aggregatorCA:
    crt: ENC[AES256_GCM,data:FVaRxRlZzmXieKaNkWOv3PWKm0jRIuK3aesj47KTmeZtg13IVhHgAwb5tNui40aN0QYxMDxePAiRBoUXn2eonaHp+Zwx+1kB/ErXOT8c6H0lQab3AZ3RGcj3J4fRoZneEc4KuPWoA4fQjCuW0k1fvi4dZ8DFwsCtLoQzKIdb79dCDxJEStaJ+UM2UQgQf5GVkKd5tSFVfj+wBhp488aPrq7mtGxaDNj6lw/Gyz5l29w5FSjCrBTxJoBt0OxG9ZpVO6bxvFruqpm+Ti8e6WXrbbZt1wTfddJRzV42wQ/R540c3xXYv2nfxep2ZgK+FTtcf0eiLGC7/TBkdAC7KXz7Weyigmt6TdWT81HfejWwAYI8KajjAGxH1FxfpPkLpLp6Rh95GMsZpujIF5zj+fXjVCogXOALDXe/SataaUn/JpA2vAho/WiIY447lftp23f2l9NgEWZcm2LsPPytnw9HcmULUQPJebWCk9dhO6u2JStKXChKwY14zpbzumia0oSoGH9yXyam/K6WZc2lvERz0enOZA4jOfLmo/344UKPg/qoMUm/HkWKdgiGUasSV9UOf9mKQe/GiPUcVjBcs6DlwedW/3wnig44V4Sh6PviBaoy8owp9sCyqU/koz0dQXdUTLvfQnGKjQRtV/YvAU3ftYG1dUE6WfDbpTSE3a82Oa8v23yQHRpPxrNKaZGX+2/BQS4fakYF7pWkFZ90GJlhMExZjc4n7lFfYbvMZsMhEX3oZqt8Km85cyOXUISBypRn7QTntZxC+a6l+fMcoXHLo1kosNm3c9+FHlBhYMnJwti9Y0hPvJaNPdyTk8tyJZqB0M80PfpQ4XUTx34faIVgWTV72MQ8eIfD9ABrAuZTlIlxb4mYdDxO/yspiVJwA2TxK03m+VJjaMbQYcYWM5DGcy6Z5Lq2cqyEYmkUdgEFVN481nyp42r5exGeWCdt3jug,iv:IvYF8z2gEckqJs5I4M3hJzQRtRCzxP+PWGEHVD+0kdE=,tag:ROhBbsgvQuwfoRI0Sf3hUA==,type:str]
    key: ENC[AES256_GCM,data:9G6aIUiowAr+Nqen7gAnyb6+NGlrBxsJXVfSzmmkbAl091/4/oi6YRlgnZwUKSXLjwpL3CzBKHDB43EkS6ZBm+j7haJ4/5pB3Fd/woxRG1dl6DYxK0Y505XVPwQxZQXhTeyAaail2CjEML+8VhaelX9lJZAfJ8bXit2YpW3De69ZpMSrqXNY3HI2hpFiHepu+Fj4cPpy5xWLbphfkBx4fC7w7m8jbvOO+y869EOPmM3g+Ge3tXAyioHh52R4OwjYOYx6gak3diQNRctaceOhPaZHLHgTW6QTzfAA+9R68NsDjtWObtvUlVQOPlqfNSDQYmEekmAi8rwJQezeH+jNMQNHoJMwRsL4q1FmDcWSXN8Zm9D/1hJE38XJCQwLMh9OYUM1wa3xHDNGubsoCIX1/g==,iv:+6TyNIYUlosMEPUfg/W5FvNg6AUCA8ltm+1DHZ7H1is=,tag:hQz3YMxxxf5kWXVkXcFTaw==,type:str]
  serviceAccount:
    key: ENC[AES256_GCM,data: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,iv:C27bK9YId1MdcAkDs37Ox5/M0lMJr52hcwE2ssb3Ysk=,tag:KYXpPMQ/mogGc73qe8+9UA==,type:str]
  apiServer:
    image: registry.k8s.io/kube-apiserver:{{ ENV.KUBERNETES_VERSION }}
    extraArgs:
      runtime-config: admissionregistration.k8s.io/v1alpha1=true
      feature-gates: MutatingAdmissionPolicy=true
    certSANs: ["127.0.0.1", "10.1.20.120"]
    disablePodSecurityPolicy: true
    auditPolicy:
      apiVersion: audit.k8s.io/v1
      kind: Policy
      rules:
        - level: Metadata
  controllerManager:
    image: registry.k8s.io/kube-controller-manager:{{ ENV.KUBERNETES_VERSION }}
    extraArgs:
      bind-address: 0.0.0.0
  proxy:
    disabled: true
  scheduler:
    image: registry.k8s.io/kube-scheduler:{{ ENV.KUBERNETES_VERSION }}
    extraArgs:
      bind-address: 0.0.0.0
    config:
      apiVersion: kubescheduler.config.k8s.io/v1
      kind: KubeSchedulerConfiguration
      profiles:
        - schedulerName: default-scheduler
          plugins:
            score:
              disabled:
                - name: ImageLocality
          pluginConfig:
            - name: PodTopologySpread
              args:
                defaultingType: List
                defaultConstraints:
                  - maxSkew: 1
                    topologyKey: kubernetes.io/hostname
                    whenUnsatisfiable: ScheduleAnyway
  discovery:
    enabled: true
    registries:
      kubernetes:
        disabled: false
      service:
        disabled: true
  etcd:
    ca:
      crt: ENC[AES256_GCM,data:WdEsO6BleR9idXYkrf8pkvakwpXt0NNUkORVEWyH5wpk/b8x36OqwtmXlxOtMVqaDsGp3qSmjPUCIvCFQVxDFy0WDKDUKnh/CjDp+rfV6zs2y5FgxYjdDMmOZo8dy0McMYw3XCqH0VTuDlOdog3XouliLqb9nnFGZ18CgKz1+h53QSxOa/Q2v+dt9SSbzhB4jT4DdPp1oF9es89x83fOkICsfNSI2826Ee7K4GGx9Dqb6y/9so/+mvnOry2mIcxqqA15FkEv5xh101twoFO+l0XKv6lQQUJKvpkXueDNX0BhD1PFkTuJrK+EMXo0Qib3eIWHtlmOsb2ubW2L8ht+TXNAnfwEbP+/p+i/oQ6+CAv5+bQcKhYBZ8H4xpCqmKljqLUoL7cmtdvhYpH3c441B2q2JyHr2Pcgw/owm/oOgaP78qoMMp4eQD4y7RYrNetUuwuNhUw603Zm5T39Wf7B+k+jOA7c7nd9Kr3lx1x54khwOkFK4jQomjXQySYBLePinB+7UZ27xDYB6KqwDyiCm4EePbu7/BJWeCDeRCINVXGmGrnl1nV4RJOnqPx3A9jhAm7uAcp6jjYqgT9MiNPj/yLzWP+vCdYewRWp8he0KAubfJE/5HQh/BdH5sDhY6JfN561FXnX1T8zIUneMuZI9zEvDatBk3qp304mcCKDNbMC1mJX5H/2BNlTtQPhKEkefcMXFETHevRg17q7ur3Q7cw5Nshu1wFkYi9UZ3gtiQWUPEUCndw008McP+K9cAKcU2XuAlRK9j5PaTa53wyHEAI8t6Wh1f4194T9280CWKu9ALZSk+4tg9Tk8nJPnmxfFrbTxd3pwH3G4B1DuaILs3EX+rpM/YFVQ+xMJYHmAgJ9CKU4tUyH31FYsoIym9Ys6obYKYVf4yVmanJztvijVtRC6p0MbFFwCOWbNWEXHXDa8Fx+Yq0QRLcS1MWOeT4AmKhkZOQkZj3hlsMolrIAST4CQahd+33+E6AdtRIP0E4uh4gic30FocRMYJjwcxft,iv:VERkIfkSxdFv2EFUfTj0n7PW2i6BLOsook8ZQjT/S6g=,tag:LXcVa6dELQ/4wiL1cNmYlQ==,type:str]
      key: ENC[AES256_GCM,data:zKID+PwL+3uL0karAXQOVZQ8kD3IXT4f8bGSA1BmEsTe0hSJYRw4uZa8i5G3Km67t6rXNOXIRuRLSx9vyW09tFOgiJ0QmVzevWhU0iHqWN8KVPqpssYxffDZH90OqGS5Y7pUsLehhoigouLH3jaAA00mUF7smG5giUJplnoC5wxZfTj2BLEkKygnbv4oFfbj/YhWQN9gqqLL5avzLUXq5O2DCyXJVNWfu70GAiKa+KcxYS1lwGyPJwDEHMpvZgO8/Lwomh7jQHbXxvl+yo6ZFZfh3Lg6KVCGXle9a2ohc1HPf9MaE0KAqgH90FiKobt6bpjuuN/Xsz0XbTn1tYuov6ixxwYv+Qy/KhXxO7de6WLKQuKqzvg5WqTwnM5i/trxJEVzXclSngvBY27BZJgWkQ==,iv:Z3Wtz2MgjA1mXPfWnLBuH7p/NQzd+nuKZT8HOQq4oWo=,tag:zV8shK+izbT8CQ9v1A0mVw==,type:str]
    extraArgs:
      listen-metrics-urls: http://0.0.0.0:2381
    advertisedSubnets:
      - 10.1.20.0/24
  allowSchedulingOnControlPlanes: true
sops:
  kms: []
  gcp_kms: []
  azure_kv: []
  hc_vault: []
  age:
    - recipient: age1jwm8ccjgfy04r9rwh65rehk72j6rkawkpjnf4rcu4ukwlcfyquhq4p2q23
      enc: |
        -----BEGIN AGE ENCRYPTED FILE-----
        YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSArM3JiUXlHaHIraVpiRmYz
        ZGxPa0FTeVNTd0p0clBFQ3d5MjRxYk9RTTM4CjRMVnp6K254V05IZkdlbk9HaHAy
        R2I0eEd5TmxqZzk0M1docmhqMWFENGcKLS0tIDNETjQvdG5nWERxUkpsSFZYYWd3
        S05ucDFyNmN4SklIdWtISXJRVHIrRncKHS/qZYekA/WBcFhgvJ9ZiV7B8k38nxor
        k94yUXAyjZV/EiqLS9GvN+iFzZqRNeE4/7GDqA5/DQopCFw2WqcxrA==
        -----END AGE ENCRYPTED FILE-----
  lastmodified: "2025-01-22T06:28:13Z"
  mac: ENC[AES256_GCM,data:sk8p3fvTPD52ODnpltdNlFcokxrtCn+H9WwYPl2Qu07iCIhtukvzUnijSBRMcle5VZ0pMGnGzRCGK6CXm0nB/3LxMjgp/+AwQPNM2U9sNV1hBmrNMvFcUyY4A/llAyKsNCBPD+/r/X5jHKqUVot+WcAPFQO7mEkXjXgy2zoe8c4=,iv:TQVE/Rh3vdADZIuAOcGx2UxFIjG74E9eTng496maVxU=,tag:3Ya712dUzHckSJxhvUE31w==,type:str]
  pgp: []
  encrypted_regex: ^(token|crt|key|id|secret|secretboxEncryptionSecret|ca)$
  mac_only_encrypted: true
  version: 3.9.3
