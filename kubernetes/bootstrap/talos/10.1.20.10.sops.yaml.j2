version: v1alpha1
debug: false
persist: true
machine:
  type: controlplane
  token: ENC[AES256_GCM,data:HDT1SPsv+WTePr1AYoR6TXFXfO6Ya4c=,iv:t8U5GGMQLCIRzAPSRwPkK3BizrBGFSumibMaNjSUxus=,tag:9G1MTswqnykL1i4a8FIPFA==,type:str]
  ca:
    crt: ENC[AES256_GCM,data:V7VwTeZdmFEixhVwAaY/Tev4Fdaw/jOdQPk+HCc8c/1pUHsL1VCMBKzTjTawf+pG5UUAV+gcJ2lmQ3QorsvJhlJXBtu+euSoUnumOY+HipjYIhQURQaqqgvZ6KGEaWOZBmqk9VvJHq0Vlc2tWAkOaGaLBY8NZ63Mf6gJCu3iTKrAgCJhgG5Bgl+zbKMAxy2m0pjgm8Ls/N4NEOhNc8k7ySZc5EKe/DEts1OtatfofcDaV7Ikq2j92nL+XO9kREyjheSwaGRvdwObEdwEHKSkj83KyKPeb8VsNAs/eGL5AEerDtw5kY5/PQep7XN5OH02S6B7IEauvPPapi+AacUO6yyU76P+wHZFKxj7upuVeD2KLbBuD2Ia6/OYVBf8JDQddBCokWec+Qs2zrDC1f3WbPja1K/PC2e35rmtDEjU5GT2Z26Vx5nIUXLC+M5o/gFhk/YKxkz0eikWJmD7VlcrzSil8B0Iul7k5LAd1+SeXPRMAkPJQEk+uXCeaYK2TEyhVZduthGImFuGrjqnJIjyhRP6A4/yOwIdYw2nZifJRXgUFSefdz5XIIaUR/WkM2MAkImEathm6tY/OofMA05quHwwyuLRrPWQXvpX7uYYz1HLINrBZ7GIzVQ7BdeZa1kjDqqNOVgM8VHHQgZzrrC1KcSEt+6V8Pu2uiWA+m68wjL0Q6yrdBUi1XS85/LWAxigULk6LhbX5fbMuO+A20ggxUh5alYVwPSlsR6MWhFWD+wx6AiUlPcAufOXxxLfE/lX/TdEf+VdR1qPN5WXcFETefPIggSx+6+T1VvsC4gSyv0xhGq1OB96Tn3IKMmhdnk9KX2eFTt6+7y8U3fslYPzM9YgtzhtGG1CAAVJhY+PI9H4g2YM,iv:F4zOq70WEDuE0Ajul0ZnDeR/CgCHhFkVoNM7GX04rtM=,tag:npuXUjO+zClWfRPdQxtyxQ==,type:str]
    key: ENC[AES256_GCM,data:nlPE4vVQdiWpzR94q1ErIbTUgXD8/ZrKqYJ3GPkgXtLHlDbca+eZ81oxR/QWYCicfsHKevCYxEjfl/n7nUa8Xw8oZArsPZgl41KQevU4SWb7Tld+AFShNhBrUX751iRLR9yPEazoLP1kyFQOFPNJ/LnB4O9ZedTc6+SX0vhwo5gobEIBa12P/GkTTQw/Y0AVKgCt/w4bgiMtVeFYj1xaqp8Idbt+z2227lL/B3Cr280WQIx8,iv:rfrlKBYPKPQxSUDKq1MtE+IswkizMdX3f4GP/8L/38o=,tag:0p5DX0OhgOyiqBreywQ2Wg==,type:str]
  certSANs:
    - 127.0.0.1
    - 10.1.20.120
  kubelet:
    image: ghcr.io/siderolabs/kubelet:{{ ENV.KUBERNETES_VERSION }}
    extraConfig:
      maxPods: 150
    extraMounts:
      - destination: /var/mnt/extra
        type: bind
        source: /var/mnt/extra
        options:
          - bind
          - rshared
          - rw
    defaultRuntimeSeccompProfileEnabled: true
  network:
    nameservers:
      - 10.1.20.1
    hostname: k8s-0
    interfaces:
      - interface: eth0
        dhcp: false
        addresses:
          - 10.1.20.10/24
        routes:
          - network: 0.0.0.0/0
            gateway: 10.1.20.1
        mtu: 1500
        vip:
          ip: 10.1.20.120
        vlans:
          # Services Network
          - vlanId: 30
            dhcp: false
            addresses:
              - 10.1.30.10/24
            routes:
              - network: 0.0.0.0/0
                gateway: 10.1.30.1
            mtu: 1500
          # Trusted Network
          - vlanId: 40
            dhcp: false
            addresses:
              - 10.1.40.10/24
            routes:
              - network: 0.0.0.0/0
                gateway: 10.1.40.1
    disableSearchDomain: true
  time:
    servers:
      - 10.1.20.1
  install:
    disk: /dev/nvme0n1
    extraKernelArgs:
      # Use eth0 instead of eno1
      - net.ifnames=0
      # Less security, faster puter
      - apparmor=0
      # Less security, faster puter
      - init_on_alloc=0
      # Less security, faster puter
      - init_on_free=0
      # PCI Passthrough
      - intel_iommu=on
      # PCI Passthrough
      - iommu=pt
      # Less security, faster puter
      - mitigations=off
      # Less security, faster puter
      - security=none
    # gasket, mei, intel ucode, i915 driver
    image: factory.talos.dev/installer/6e6f23cd5ca6099bbe4be57a2218f628e61314545d5da36dcc6516c59d3be64f:{{ ENV.TALOS_VERSION }}
    wipe: false
  files:
    - op: create
      path: /etc/cri/conf.d/20-customization.part
      content: |
        [plugins."io.containerd.cri.v1.images"]
          discard_unpacked_layers = false
    - op: overwrite
      path: /etc/nfsmount.conf
      permissions: 420
      content: |
        [ NFSMount_Global_Options ]
        nfsvers=4.2
        hard=True
        nconnect=16
        noatime=True
  sysctls:
    # Watchdog
    fs.inotify.max_user_instances: 8192
    # Watchdog
    fs.inotify.max_user_watches: 1048576
    # Cloudflared / QUIC
    net.core.rmem_max: 67108864
    # Cloudflared / QUIC
    net.core.wmem_max: 67108864
    # 1Gb/s
    net.core.default_qdisc: fq
    # 1Gb/s | Jumbo frames
    net.ipv4.tcp_mtu_probing: 1
    net.ipv4.tcp_congestion_control: bbr
    # 1Gb/s
    net.ipv4.tcp_window_scaling: 1
    # postgresql
    vm.nr_hugepages: 1024
  # sysfs:
  # devices.system.cpu.intel_pstate.hwp_dynamic_boost: 1
  # devices.system.cpu.cpu0.cpufreq.energy_performance_preference: balance_performance
  # devices.system.cpu.cpu1.cpufreq.energy_performance_preference: balance_performance
  # devices.system.cpu.cpu2.cpufreq.energy_performance_preference: balance_performance
  # devices.system.cpu.cpu3.cpufreq.energy_performance_preference: balance_performance
  features:
    rbac: true
    stableHostname: true
    kubernetesTalosAPIAccess:
      enabled: true
      allowedRoles:
        - os:admin
      allowedKubernetesNamespaces:
        - system-upgrade
    apidCheckExtKeyUsage: true
    diskQuotaSupport: true
    kubePrism:
      enabled: true
      port: 7445
    hostDNS:
      enabled: true
      resolveMemberNames: true
      forwardKubeDNSToHost: false
  udev:
    rules:
      # Thunderbolt
      - ACTION=="add", SUBSYSTEM=="thunderbolt", ATTR{authorized}=="0", ATTR{authorized}="1"
      # Coral Edge M.2 TPU
      - SUBSYSTEM=="apex", KERNEL=="apex*", GROUP="44", MODE="0660"
      # Intel GPU
      - SUBSYSTEM=="drm", KERNEL=="renderD*", GROUP="44", MODE="0660"
  nodeLabels:
    topology.kubernetes.io/region: main
    topology.kubernetes.io/zone: m
cluster:
  id: ENC[AES256_GCM,data:3zSU36xF7jSSTrjTcnR/OUFKD1+WBCdjwyWHFEAyksh6gww9+q/2nDSITB4=,iv:FUcJ/Bkj0lWKNcg7RX/w466JPMPa4N3q4VSEyVOQh6Y=,tag:Raal50PjcdPnhFxdBMkytA==,type:str]
  secret: ENC[AES256_GCM,data:8jY7wugU++6V+p7NLH1tMJtJIDS6kHyff9lkR63FRlWD0WxgkkPm89b+cuE=,iv:4IRiMClIygGJUXWHVqmHUG3lHVz/pdFnfrCV/de+8Go=,tag:KqYg+U/kRruzm4eIjxej5w==,type:str]
  controlPlane:
    endpoint: https://10.1.20.120:6443
  clusterName: main
  network:
    cni:
      name: none
    dnsDomain: cluster.local
    podSubnets:
      - 10.42.0.0/16
    serviceSubnets:
      - 10.43.0.0/16
  coreDNS:
    disabled: true
  token: ENC[AES256_GCM,data:v2MSatCJkgYs/yW1LlTwZsdxm5MwGP4=,iv:I2F939AfqWZFvd8q06biai8ZGHJDQvXRDm6UrzXEOUM=,tag:3dNYk8z/4l3/4YiDHlmPqQ==,type:str]
  secretboxEncryptionSecret: ENC[AES256_GCM,data:i0aYlJIVDGL5w8HPk9pARqT6psH/KLOOoi53V5Yl+nHYuS022AG22JYB+Fo=,iv:OS1z2T0v3qTva/q71kMYJXIUQtsM857ZSSy9NnBKmWE=,tag:sHsYqRQ08AuVoWOvvK/n3Q==,type:str]
  ca:
    crt: ENC[AES256_GCM,data:FGDQdHqJo8cz1rxxgG9AISlzc3f0W/lDVQCczBc62JGNNkl5PbdpkNNNBmLh4xIjh0kwtY7NSTFBJVbNRyDHQckPUuT2Yox13EV1GEt3qg7HFpPQcsAFolesRcGQJedOWlyfYdUqvreyQ3mTh4AikpYmOFTvQTliQcewYz4vr+1FmI8uAYVK2ndFW9U4EtQSWe/s4aucY5hV1flCQHzhEjmJWysJ0jHVm7C4in1A4bsttJXuClcFt8Pls4UXw/QWiY9jRB0KImdJAMotS3Kl4zgrev2bUIwNyL7Ro2RRhFQX+LUI1ck/3LOwE2MnMFJUdn2in4vBfUwfPJMfzgkUH1lj4AFOaNyq/wjaFMOIk+FX+sU9X1OVWJcKDYlNX5R0f31/RlJHgiVavoaaHFHqk2GO+R/nxA1MGCnAGiDBjj+igWBYqOP4L6VDmGfprp5IZcVoDsI0lS6QBUjQ0VfvCIUGL/mUus4rJjnYyZgYQJW2LHVmzIcOAyRQ0ODQ7AUIrei658xAY6u8+Ex1W+2dHkuq1w03lCZ9E/0GNF6u+Ll6G18kWId7p+NN5PSK8Jl8QkZg6hl7TulClD/G3DpXaeTNg/IYDN15j8HHPVEIHpoJpsAPm3PyrKOeHX2sry/TaCK+/XA7SS8IlUhDdYpguLzezN0elGCweYd1qglHedi54LEyGAyH7Iv4m8vNNhiWQg1AhgoBTNM31JjA20cQStCxn6jXrQxFr38egQCe82c6MLE61ET/ZIQfsOucDjTl/SjH7zqbX6ckEPTzyjzNqGTaHK95DsomBmuVl5NOdFbZZI/vjrRjrKcFtEC6uuK7mRvzkbPDzZtdrSrHti5m03oXgbeS3fINgompj74IWAePoz3iU77auQs4DJKHIJomtKIxDscc+cgbUAFEV7fr81J6IxjkRYrm7lui4NAy3tIwGX7n6I/DiHE8Wv/RV2tt1up/EMXPNbIVX7zkp4x5Ea7bgf5PZF1roS+ckxnAUOMwjgKeP5+Ovdi5kCnhQMfiTXByhRwOQa8XjdzTCsdymAoXteA=,iv:tS4Od6zY/pLoSsoyYfgRQ9ydIiCByySnWdIExN1K0hc=,tag:X51dsEbJ/86b3pBLABKZ0Q==,type:str]
    key: ENC[AES256_GCM,data:m5IdB/UbPkkN4tkmu8/2edRFrHU18LRm22U5yyy7v95ax29+tMHR6qWyNuv+PaOTPYTw8fBf9QQVzZ2tpOtbxFA5E7PfvMO9EG/l9qR3+WKvWYfUeOa331uDnonmgSLCu6ejVp2iEIEBqVJkdbB7IFJZ9KaPI1fug7rb2a3zQ2XY8aBpB64r5cl3+l0F53SmrpUYd7vz2u4cupRbwAiKfN33yio3cO3gOXVZr8Obc9wvn3AtI5TrVdFY3Bw36/OQ4OYJITfuburGUI0WFhbiDU8s1Emi0CnS+dKHW8puDLQdZOaV0VqV6Z/Gv+5mcRIPxZDa6jPtlE1eEttDokXEno/Uc08WlfWMWINEgaXtVk+Cskas7nEWJgklwsefDq8n6ov4kAfFKggnI9tGG1XcKQ==,iv:dLcDvM2uCnzOAXDfm8GLOgKkTxTs+fxpet9uJfcAGHc=,tag:C6azzebX+VtoFrQ9G1x1xA==,type:str]
  aggregatorCA:
    crt: ENC[AES256_GCM,data:wm7M/5gteY9TrIpRR5L6/c7lG93DmldCYNCc7s9eSx8AWz7Np3m2+N/vsjXaGh+eJiP6HhKSxNRYyLUII0RTj5Y2NHGaQyTQobFKClqwzqohiKY9DQk+2bcOkU5iKJvwPparp6PwqcuPDBZDsRljIWh6/nK8pb9D0OHumFoFJBEna1JMxuJ1XUEjeVc4S+LqSLDm736UWA6T/27u5q4L550+xx6cGT4hce0utm5T/rNktw81ctVxKvLpQwlmHNV0t6SrZ5kCg7Bu7MK+vN5lVdR8iEkLSFjYwQJd/xmaFssEtk+iElQZJILc56x6cxzsa8X+DcY0TqGE04qYhtdTLcv+pFftmnpCUY1rZJBSaBwMHQC4jpc5vBRX2QLRzJblbD5JgscOP+NrZsJDX2+PXiNwWawVsHssqtQiZ88tzLbeiUyCU7KJfLCYF/H6673xhvlFgyR391+vrFsFGYojafRMKyS0TSzf4vzq2E+29WzHvqW9m4vRLPhbqGPxGvEiTla5hdy1EX3tpHKbVWv85cq4fCGWceV2L/D+j/CbYtb8UcfmXQsg0goshS0//MuO0TUQzZP73LUI3xDlgjfZFdn4MNpxVIOM85kFIJ4IqBmZAqdHQbFEa2qSPCn7Mvby9JjnV3pKj/uhfS6zCI7ACP3s1CWmW4jlekJpFeUtXR+sBVwOAKjynkocqUXeVYk51nexR5+KUneS3rOrcVgOU6hmjDvjIizqX0YYockGvmbzNIfn/1ZTaAJHI+Kcpcskn/VStogsqeilLm+LaGdDWtPmjkgdNOC7I8lk9PeAD6Yh/F7nCZthd6gjrSVDhlB/4Rr+Acpm6HNq97DmMqgiwi1ItI4sdWxQ7XPrx58XrTQYC8T+Yk+NcAUCLC3GiZE3kLZDzB0+nZngxuz4bAwPbbNXfdTxMnqgQzygzagC5Caxn/UZ8jHfafeTecblAm93,iv:QofT5ZcX5d9TEX/18uDoFo1TKsFwvLeBV/ULroYbjCM=,tag:n4g2HC3g6LA+Wc2ZwHrwpw==,type:str]
    key: ENC[AES256_GCM,data:5BYaXy4am7I84DPQ0umEz0Jb2tqd2kA10iX/kscTNGJJVlORYD6j6LCAwAz1SKXfpNzk4tOQoetUBLrpjQcZ0acJFyHd1AtelKwuDGVsY5On8sE5DTebsVusigVxk920JguJfqu6YkVXaEXPRxGAJ/cVgUOg+iVknQp6vKIVezwIvx3dGTILh3BLoL+ppj3EM2gtG3fhVm43voN6UV3VnmCETaBVjr7lPmtINWK0paw4LrAbMzHqumwd9SbC1KfoeyN0ubFaIub94FTsJRKmF1wC6FvRgGbgBn0zjvrKL2lB4BLF5HdXtDdXLqDcifcfZfaAFm2Iv7Wc4iwH8C/Vgf5/VqeFOScxxdD079bFmrvhJWmIaaYk8zAAii3CtyVKpKYA2wTL6w1zh94MRNB2HA==,iv:3m2406+iyWZq8zRAq0TGJSQQ/NLTI1UVBLbtY3oux3Y=,tag:C0SGvaR+V9Angby7vG/vFQ==,type:str]
  serviceAccount:
    key: ENC[AES256_GCM,data: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,iv:g4wwMZEUGWBv/ZmHHT52XzhzQ9W/KEYFiRYgDkf8Miw=,tag:EHWKopwnPfhAzotXSrXvkw==,type:str]
  apiServer:
    image: registry.k8s.io/kube-apiserver:{{ ENV.KUBERNETES_VERSION }}
    extraArgs:
      runtime-config: admissionregistration.k8s.io/v1alpha1=true
      feature-gates: MutatingAdmissionPolicy=true
    certSANs:
      - 127.0.0.1
      - 10.1.20.120
    disablePodSecurityPolicy: true
    auditPolicy:
      apiVersion: audit.k8s.io/v1
      kind: Policy
      rules:
        - level: Metadata
  controllerManager:
    image: registry.k8s.io/kube-controller-manager:{{ ENV.KUBERNETES_VERSION }}
    extraArgs:
      bind-address: 0.0.0.0
  proxy:
    disabled: true
  scheduler:
    image: registry.k8s.io/kube-scheduler:{{ ENV.KUBERNETES_VERSION }}
    extraArgs:
      bind-address: 0.0.0.0
    config:
      apiVersion: kubescheduler.config.k8s.io/v1
      kind: KubeSchedulerConfiguration
      profiles:
        - schedulerName: default-scheduler
          plugins:
            score:
              disabled:
                - name: ImageLocality
          pluginConfig:
            - name: PodTopologySpread
              args:
                defaultingType: List
                defaultConstraints:
                  - maxSkew: 1
                    topologyKey: kubernetes.io/hostname
                    whenUnsatisfiable: ScheduleAnyway
  discovery:
    enabled: true
    registries:
      kubernetes:
        disabled: false
      service:
        disabled: true
  etcd:
    ca:
      crt: ENC[AES256_GCM,data:zMd4vdwZoQS5Xj8f2kXw7TafyZCT5anYF6zbS4nZ9opwzAVFdkt2uxxowIjC5LzGW4hThxMH5xG/OC+ohbyYKdrG0g869LSMBsiNgdfFAq7j6lUU8g0cYicHinMaw4zoZmt0j8nWFYvu+vaD4CvUikz01mnDbjUYq15vp+WaliAUQNDWRKsa08BH5cEQxpmFTUVhVtnrqQMMFaR59gT0OvjK4TwzhWIdSCDHNqb46nkKHujImgXlV+CM7IZHLlbNngGbsFGxLRs0v1XsNZg+79IdkZ4Jwqe68rb+P7Irbe53HCzo543HEj5KaVztnSNLUFhJIY3BhArpPjpOafZBd7MqEwAmOVWxmcOe0zx9f4Gr95M53SE6l1sWDeENir+JVvT1tyTsj8lU56KSAtj3rnewBGuWI7xE9sbZjDkCkl8VQ+1acQ/CszE0Nr1MdwQDGE2fXh7nlcRO9bbDjJy/58xmjm4/zox6NUjYP9dnME925Io9Fc4Zl/LpKjSR7E4qG8RLBYuM73HjJos6/HNEc1Bo1WPMCOzHq9uCTSt7pk7m8DpY+yRrQhh4E1A8jxG8Hv05QBpP5wrqEkWwzXMuZ63mn5MihnA4pCz+o2COR+8HQr05yaJS15MeanyUq6gTU+K2HYSZb+o+FrodoNh1uvoJV9+UhhVSXoTA1FIKg/tTcg8UhTtzASYJL0UQYqpHHnw0mEbD6QLd0glDir87HZZ8HFbm5wBwjnAAxub5WflDiIxczvHOyOuckfQ1vljrsrTtPkZbqYyLiTwyCtBxCCi1W3JGp9Bzpy7VhK10WQq7kzXS56YE8mkpzMkEiuCHNk6KkSC9jgefvCDouUh0TjuImxjxBI5k7Q7ZVQRHAztpi4bTB77GPkxw5C/b3tJZPSpiV9uYKI7MVQsHLlUJ7spvavv9ETpEJ9B/WcUe2tOiGr98cuJoV2u2wRlr79gGGUdFFcv8B3nmjO1GY4a+2HJqGUfPsQH66CrOkPhDbZY0N75Ft2kDPzlxxrWAsufP,iv:UXXVniz+PcmVi0Gm0XY9SK2hMdzQGIgtXJStLQqaD2U=,tag:G4Wr9ieJVr2McPd0Z571Rw==,type:str]
      key: ENC[AES256_GCM,data:vtTq0V945DmthKac2PUS60W/NzE8Hg94Zq61iAE45V0JgPUemdKKiq7TtkZ4PNQwOUbBpxKkoQwIRKY9Qf3u0x6yUI6ND2hXGssqX/Z5aLLn24M/OI2kmW5vrDZtbb9Nk+gxGQGlkNez/1iHEfMoPUVTqAWpYsQBZAwd4W+p7xF/MrjrgPj0reC/W7iXqos91lkmRDLA4qCOtM4qJDjl/oiTEZJ5LPMI67XOOaT/oZb/csq7u4cyapBFMouOai+RRGxoGgRjrTKINgTY72lAPA9kjHLnIzt3eoJKpJZuWlXi5c150Io4z0zr1AuqD3TCOcdtdwOuSJt04oXxbwUUJ4dQfd2cL/hsobHBKXwqDOv2b0SYNIPtiODrdQFod4XI91Z7Y+EOx3YoP/23FrA16g==,iv:aUtT63hqMhercj5zLDDzV5jh0g4D6DMCE6cEsLMwj58=,tag:KPIHpxwCJpv1c6x55/Z8lg==,type:str]
    extraArgs:
      listen-metrics-urls: http://0.0.0.0:2381
    advertisedSubnets:
      - 10.1.20.0/24
  allowSchedulingOnControlPlanes: true
sops:
  kms: []
  gcp_kms: []
  azure_kv: []
  hc_vault: []
  age:
    - recipient: age1jwm8ccjgfy04r9rwh65rehk72j6rkawkpjnf4rcu4ukwlcfyquhq4p2q23
      enc: |
        -----BEGIN AGE ENCRYPTED FILE-----
        YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBMREFBQVhSQ2VUaHdieFp3
        NGxWSUVpN0g4Vm5BaGlUVlc0ck5xd21oN2tvCkhIWm1SM1dtdUE3bThrcWsvc0J4
        Zis1RWVBT0tPU3pRTTU1QXhUU0JIVmcKLS0tIFFoMUVDeFFha0ZKOFdvd0R5Wmx0
        YzFPaHUySUdmOTRVTU53OVZMaHlod2sK8j115XSX/Ca+HxIVOYNH/mxxR0qEkIO4
        egdeTTID/0DrR2YReiqZ8gekJJPfwK1d0R+pCR70txmgWia7jGueQw==
        -----END AGE ENCRYPTED FILE-----
  lastmodified: "2025-01-20T17:09:30Z"
  mac: ENC[AES256_GCM,data:yz+NlzQsyUaKKeFxkXIR+nqnzTkZcmgfhlMjzuGAEuA4lgs/0N6mMVeiaxcZHsVVLrFwCWqO/BLqWcDMP1nSv21E2DzC+/eG5zkkT6zUlD/PqnLaqISL5Q3QLG92b9zzk6aD9b3uTn3k+z1fk2igE7tVJJju7DxLe3D6f60Uo/o=,iv:m1DjidOzDfD9TB7+gsRBeVcahDgSH1F7htuwQmxhM8w=,tag:FQPtOeD1sr6HW6rit+3MdQ==,type:str]
  pgp: []
  encrypted_regex: ^(token|crt|key|id|secret|secretboxEncryptionSecret|ca)$
  mac_only_encrypted: true
  version: 3.9.3
