version: v1alpha1
debug: false
persist: true
machine:
  type: controlplane
  token: ENC[AES256_GCM,data:f9mX8O4DLY38htHtpQJqr1YT8MfbRxE=,iv:XLqkRP3TueiVKPcg0wQ1jBAR4yJ7tySbC9nzS1SSRT8=,tag:Cpoxs0T748QIMqnKd5mPPw==,type:str]
  ca:
    crt: ENC[AES256_GCM,data:ZktUV1OBhBW00d0QPrfA01rEYWapARRrIuBd+anbvCe70Mx2J0GvY2HeNQtq3cO2I1SQTh3a4HQiNJzQL0TqWBF+/K7HpahPHRZhLdTgLlXSy9LHJcvB+/nZAod7f2zOaWbyRKKd2fqRo59zgok6ngf+GeqPhNkFLJErmnoc1/As0zr1OGav8DNkrqKGJVUJsNpt+WP0Ot63vu/ES7ronQtuF7htK9iMFpu1rYLGS2+ApV/YBNnz47K/n6lNQ8r5aqmeqMnKuc8PDroC2yqRfwXaYu38Ff4xOIhbGzMl8N4UU3B0h+0QcQkxhS3XBsS/R5FTTohmeQUWFshH0Xm3ajDAG/h/qGxLP6nICB3xIxbGzoF9AOxYkUNVnUTaFAaf82e9vg+6B5b/TrukVzJbhccXawing2JbtKBvtw6+H7RlX8z+DWD1yPKDdCKoskuiuON8yKOaGhHmuDWcSAhKRvaDZz/ImwiJKHmDd7ZVxrNyzMZbem2Ne6D5Tm2BwZRPjBbiIwNnPEwtX3XcCv03Ci+5OBspPPEJT/e5G1pXRdOXVbKEaVM/WiWZxVSDJBiRzcQY081g4iSvYqjy84hLeUoNgyE4C+LN8rW7fYmeqV04XzpafXS9aEidXrhHoigaTBWU0coteC4Wbecm9eLu9YVzmLM04fBvIi9YyHOYGsqu3HTrBxHqRyhfBzw40KF5DtbyyFr5CVOWuHdYGi26AVl9UhPojCLB1mwCqSJXG9Brv1ZVQesG1/Z+ulvsrCB97E9x/05o3fu3pYmiDy5OdBULJZ/ibUNYG7kWIQOAwZOeKP2E8mZh2LhKdMvOFLs0DDqCTOf2tSLdBncEJX9Y+ALVHK0or1kdebEb3Njo9EUlqoMv,iv:/QOnTrUJ7HmRQHKXdoxPFULzIzq4/VvWmzqrMLeXvGo=,tag:YCtjs9x66aqFPRWZsakX7w==,type:str]
    key: ENC[AES256_GCM,data:D1eM4ifWzkQZLR6Td1oawTT592NsQQ8S+ETZlBRMkG1erzqbgeR2LrxTpFuv7NZUweZdLI1nEqwi33nb9RgVmMcVq6IXg9hmGfP7M0nBWIv9Muc7ERVkRF3iS8YzUNdylC9im2zqYQvptvDDAlFVsJO+i2fZwpLQi4cGg1W/kESW4cax/bzQK78+Q561dKWgVE9aGfCOxpU3ZryrSG8KHEZLs1w7Krx72EdX5SEkXUOSkn8w,iv:CWRTZutpBvvUyFgEM1FKCebTlCFQscmoolLTPG0kXiM=,tag:O44YlOmcE6E4L7MAt2a/Ag==,type:str]
  certSANs:
    - 127.0.0.1
    - 10.1.20.120
  kubelet:
    image: ghcr.io/siderolabs/kubelet:{{ ENV.KUBERNETES_VERSION }}
    extraConfig:
      maxPods: 150
    extraMounts:
      - destination: /var/mnt/extra
        type: bind
        source: /var/mnt/extra
        options:
          - bind
          - rshared
          - rw
    defaultRuntimeSeccompProfileEnabled: true
  network:
    nameservers:
      - 10.1.20.1
    hostname: k8s-1
    interfaces:
      - interface: eth0
        dhcp: false
        addresses:
          - 10.1.20.11/24
        routes:
          - network: 0.0.0.0/0
            gateway: 10.1.20.1
        mtu: 1500
        vip:
          ip: 10.1.20.120
        vlans:
          # Services Network
          - vlanId: 30
            dhcp: false
            addresses:
              - 10.1.30.11/24
            routes:
              - network: 0.0.0.0/0
                gateway: 10.1.30.1
            mtu: 1500
          # Trusted Network
          - vlanId: 40
            dhcp: false
            addresses:
              - 10.1.40.11/24
            routes:
              - network: 0.0.0.0/0
                gateway: 10.1.40.1
    disableSearchDomain: true
  time:
    servers:
      - 10.1.20.1
  install:
    disk: /dev/nvme0n1
    extraKernelArgs:
      # Use eth0 instead of eno1
      - net.ifnames=0
      # Less security, faster puter
      - apparmor=0
      # Less security, faster puter
      - init_on_alloc=0
      # Less security, faster puter
      - init_on_free=0
      # PCI Passthrough
      - intel_iommu=on
      # PCI Passthrough
      - iommu=pt
      # Less security, faster puter
      - mitigations=off
      # Less security, faster puter
      - security=none
    # gasket, mei, intel ucode, i915 driver
    image: factory.talos.dev/installer/6e6f23cd5ca6099bbe4be57a2218f628e61314545d5da36dcc6516c59d3be64f:{{ ENV.TALOS_VERSION }}
    wipe: false
  files:
    - op: create
      path: /etc/cri/conf.d/20-customization.part
      content: |
        [plugins."io.containerd.cri.v1.images"]
          discard_unpacked_layers = false
    - op: overwrite
      path: /etc/nfsmount.conf
      permissions: 420
      content: |
        [ NFSMount_Global_Options ]
        nfsvers=4.2
        hard=True
        nconnect=16
        noatime=True
  sysctls:
    # Watchdog
    fs.inotify.max_user_instances: 8192
    # Watchdog
    fs.inotify.max_user_watches: 1048576
    # Cloudflared / QUIC
    net.core.rmem_max: 67108864
    # Cloudflared / QUIC
    net.core.wmem_max: 67108864
    # 1Gb/s
    net.core.default_qdisc: fq
    # 1Gb/s | Jumbo frames
    net.ipv4.tcp_mtu_probing: 1
    net.ipv4.tcp_congestion_control: bbr
    # 1Gb/s
    net.ipv4.tcp_window_scaling: 1
    # postgresql
    vm.nr_hugepages: 1024
  # sysfs:
  #   devices.system.cpu.intel_pstate.hwp_dynamic_boost: 1
  #   devices.system.cpu.cpu0.cpufreq.energy_performance_preference: balance_performance
  #   devices.system.cpu.cpu1.cpufreq.energy_performance_preference: balance_performance
  #   devices.system.cpu.cpu2.cpufreq.energy_performance_preference: balance_performance
  #   devices.system.cpu.cpu3.cpufreq.energy_performance_preference: balance_performance
  features:
    rbac: true
    stableHostname: true
    kubernetesTalosAPIAccess:
      enabled: true
      allowedRoles:
        - os:admin
      allowedKubernetesNamespaces:
        - system-upgrade
    apidCheckExtKeyUsage: true
    diskQuotaSupport: true
    kubePrism:
      enabled: true
      port: 7445
    hostDNS:
      enabled: true
      resolveMemberNames: true
      forwardKubeDNSToHost: false
  udev:
    rules:
      # Thunderbolt
      - ACTION=="add", SUBSYSTEM=="thunderbolt", ATTR{authorized}=="0", ATTR{authorized}="1"
      # Coral Edge M.2 TPU
      - SUBSYSTEM=="apex", KERNEL=="apex*", GROUP="44", MODE="0660"
      # Intel GPU
      - SUBSYSTEM=="drm", KERNEL=="renderD*", GROUP="44", MODE="0660"
  nodeLabels:
    topology.kubernetes.io/region: main
    topology.kubernetes.io/zone: m
cluster:
  id: ENC[AES256_GCM,data:tt+rRlXvMrLWHqD9l6TktNOHCPVbp9TqULfHaBLEcrDxYP3B3yi9NhOJCt8=,iv:5lEMu3AUIBdWvfBywIHN483l4AAOs5p9Xpsw1K+qJew=,tag:TbXW9a8c2/MuqXRP4HN11Q==,type:str]
  secret: ENC[AES256_GCM,data:tE1Fh1ev6AQIuFutVLQ/Gw7FiWnLjgB8ClQaOXksTRiDUGVLcJyAVhO2tTk=,iv:8DREuUbemmBGWQewU71gxZ/f9ayxluOj0IjoxnAidoE=,tag:Jk9zHzQhWc1jFLMg33PAuw==,type:str]
  controlPlane:
    endpoint: https://10.1.20.120:6443
  clusterName: main
  network:
    cni:
      name: none
    dnsDomain: cluster.local
    podSubnets:
      - 10.42.0.0/16
    serviceSubnets:
      - 10.43.0.0/16
  coreDNS:
    disabled: true
  token: ENC[AES256_GCM,data:blZn5IQiUGPp46YxD+njt0/kV6njHlE=,iv:z8tVQGJCdRbrNxmUIiOjZmnT0AIqaf59FW35L84Ecr4=,tag:4mUQgklSMMfe6+Du1IpfUQ==,type:str]
  secretboxEncryptionSecret: ENC[AES256_GCM,data:BvflXiPoVPtcL6ivOu++ss9tjnZ+mlHCm78zUIPmdSPM3Xjs3Hg/6857sGY=,iv:W1goBgr8VoyOOFTis2Gz/dqZNFsM7soykE6cENcAmyI=,tag:qtbET3Nvyej5TmiuZ8F28w==,type:str]
  ca:
    crt: ENC[AES256_GCM,data:JYoq3Ay7vJOSImMvFIJd/fpBb/h32PIewsXgnw2EnSbZnKph2O1Gkx5y+rjGLyQ6cu7F4fIZsIB2mij/R7ibfosLjZ/6p7BWEIP0Mr1rnfWMZY5J8R9vPEvh4XbPZ25zJTOkO5EXP2xVthQgrnk4I+J3Jw1qSWO5lG8PB2QTm6EnWmuI+bPsqmFEJoXn6zyExC9CagYihXq+pA5xTOp+CEij5GOXmE9XdHP67n4FIQJk9yXXtxQ8aA0ihXdrFVfzKdre1GMtAtWofM2M9hu5NU4X4Ed3U0s9QRHQq3zKKrSFmrg55NS3XARMZbQfZhvOb26HBEFQ647ayNRmXw7uC/sVfKV3NiWOFBF/d6sDoK1VGkl26/fy6kmf50CXMbVcxl0R+JkkeUEVXhfrbX7sO6bBxq8XCHznfr+1egWrsm8SS/LcRSgPiO6ZsUcJdXEzre92rSYv/n6sEAI2+0iA7G7PDDl2sLtNZNFPkEDaEwnt7J6Di8a9M3yjQ5xr+oJlWnUpHu+yGJkq6/cE+uQjL8NvcVGEQi7KqQv6HX49t3En9s1wQsjR075qUDD2BnPPIl2gHV9tH8GrPWmAf1Ag4WLvWMQRGNaOVRUaFyOQ4A09ePL+YYZwB62fzbYrOFlcYm8N/JdxAbHStICXoWuzzWZWGh8wF0Ohid8tza9PzzvjFjFF3smu5vvrQi3OPgpRcBOuLYWypefE9jN5KKGuNJkd8l09mGbr7LPVlIue/vdxYgS0FC1CJstjHkOFsJWHCD/ZG2NxmM3XPv1OMqLfAYa3PnKRe3OepSKxLpilRVwdUDPTsV7kjygACU8RcWmzqZk+XZOfWisAiB1cZvYykA+5PeyIYEW0KnnDtKIsnRf9xHD0DvrXMn1LA+n2gFrljUUchHTgdjTqZJADhqjrLqiDKzfwogOQeLTtqs0/AsM7AqJFTtVbLQiwV+Z7iFH9pd6KlYzBPrN8M5Iy2VVQAQ36Sbu9l2k8rKwDdjy5yGbNV1/BiHnjA8WMP12u1o3/YTmKZrKNnAH0ExTHCjs7b2ifoJU=,iv:F2iDM+akLMX7Joqf5pLxEOWG1hqacaPWG/xumLNwBWQ=,tag:t4FpkLQUkr5NEcX56dVUkQ==,type:str]
    key: ENC[AES256_GCM,data:vsK1pFLqLx3nTifUQG3WGPRXBh5QBxI7HD7nnk18odC0ntGzLExVuT7l0QtSzz1+4IMkoXPtMDvLaYwbuNK45SoC+f+/v21+eS0KUIBnGFw3w+VwKleSAZwkYa+EyfUCjnOYd/BnYmeyzjWw74M1ZEOVnIh2PorYwwOMIu+zgaForIcxl0LE1IKvESHhVyOlH2KC6Pj0/MeBDBvgxmXXLmTBaI6fjIACXxIQE3lZHQy68M1WCY/rHamOtRJiIiciBwey4riLdBvrwa6z0Jv690Ms6qOSWlFF7iZogZkbHMNpw797ekh/EsNufjOpgDdft4gyg5yG7am9zAgzljcQHiDVr16w1BtX9E7ECIeqyZeehzQnpbdBJv2+atJ7pvaQYy98/+c74sTSuEKxvL4TRQ==,iv:ccrIFa/yPjuYmcjsZ7DSYf0uBnijTed+HXauWzAibd8=,tag:j2+17SdGrSA4l3Z6Dxbowg==,type:str]
  aggregatorCA:
    crt: ENC[AES256_GCM,data:KTpz7R1agUilLWko2flFVKEEsgam5ntszscw53+Sg/8dldnchLbijptGMq5gJKr0Rxyua0wTIdJ9GQBn3dwViNC9me4nRUuUg1Nk9bXXvK96Qtevm9tXPLm9dK4w5QWa7319V+1QSybydyMyCGxuFoTxsFSGlP8hTOTwVgbwpJVyUtSGQBOWeYbB8gH6YRNYsVKnfEa6YnpD87aRqPgRD3z0106D6bCcbc4garFNXERa/gCkOIt0rLq/jQG6vOkldX4QUARsUnj7XAU9va6RTVJgy9F6FP8lYSm+xMx4y2aYG2TX0lw8NVuMsy0UZrHd20WucfIJ4BMYZGAPgem+mkG5cjwgkm+OMwmTtrCnPyAdMM4HQ6SUctCh5nKkESb5UhQ8igdpF6hoRypq9IyWs+dU/5GwEZLkvIS0LERXgiKKeGroKIlcwG3gltpVLrV1lWobkvDRrBjp/3ExkjobEQzVwHQtgiR6o2FAOJcA65Ucmrw/LZrqJKst0R9YkAkZJtft4poTe/SfjoVZ5Wc1LfvieR+EcvV7bBAXHutHGVgAinGTFMZ/7VlXA3e6hHX7b+5f47qn7reHdUqxuxQ08/G9tQ63QsI7U1K0uHuO09z5bOmFXk0npCR1w9z3ylsxLPnVwCZgcB23e5EwYQ/TrYfOudzQMJYNFMpk9HGGXx4StSOLg01061QGEzwB9KhV08dv7TJ02z9kLI4JsK6EVo43IIWb+eM8/y+sSBpicP2xtkCmkSna2MZ78iMSFAEMznT/N4L7G0jOjlYHmnotQW9jJUuRo5s4Km7iGRAkzdqzs3H9Mj7OVuFphgKRkvkbJ9zwBrM8coLD6+Vk6/HmU3fdrsLHoN8btCFcvS4aaA9WL3FziDnUs3KX1f3vS86PYFBPWGcpbfCU88JV3rFjPlhKDqfcjxh4CIRlQyIj4PdTVjuPJFU12RrNqdLngkVe,iv:8o9Uso3ew9lFSPWFU/5azBDg8ocBiUeA7MSR1HgfHmM=,tag:vXVDo5OpKMfVnQoITZtEIQ==,type:str]
    key: ENC[AES256_GCM,data:GJj3KTkADLWUk6sRDi7aaOMub01A0akcMXw55mlRpjAVSFgLYEGTnNBDjL/nuISHs+4lTgrbRfXI7Xk76v6xejm4Amrgob9i07TH2P8O0oipDa7qyQQDo3zzmFgEgwE4Fi5FwY/A4RMQDfQMJHCf3g8Ih0ahRh7AW2kCWz5EbFWeEidMwO+pZJMNbOA7kHk0mjKw99o4gOOOOW8mtMrL7aoQfh3vY33rBoyem0uQqYFrTcwSzs+Rus7mCmvI0n3/SfXjUrIjrBTt2TukTUbFlrhmIZV7aSxiJStxdJCaEx2KPSpY3oJmxnh2yqiBnBLFceWBjDFjXnhHMTl/7yLB55P9TfWRSxKr0FICaCD9XYYt2bxp4eQfEHdGKP9668ep+TAaxjpcWcscaM4PMWyIlw==,iv:GzgXqK/gixZvjrl5k+yjQJUlTYaIr7rSZg5p6YHak4U=,tag:5AYygbWxpJazBGxCJysWlQ==,type:str]
  serviceAccount:
    key: ENC[AES256_GCM,data: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,iv:rEReKcvwz32tdFjAl3wJHvvSL2VxIW2V1Gt6xcYAfrg=,tag:by2EH1GHwTmHpSbFD/7Jig==,type:str]
  apiServer:
    image: registry.k8s.io/kube-apiserver:{{ ENV.KUBERNETES_VERSION }}
    extraArgs:
      runtime-config: admissionregistration.k8s.io/v1alpha1=true
      feature-gates: MutatingAdmissionPolicy=true
    certSANs:
      - 127.0.0.1
      - 10.1.20.120
    disablePodSecurityPolicy: true
    auditPolicy:
      apiVersion: audit.k8s.io/v1
      kind: Policy
      rules:
        - level: Metadata
  controllerManager:
    image: registry.k8s.io/kube-controller-manager:{{ ENV.KUBERNETES_VERSION }}
    extraArgs:
      bind-address: 0.0.0.0
  proxy:
    disabled: true
  scheduler:
    image: registry.k8s.io/kube-scheduler:{{ ENV.KUBERNETES_VERSION }}
    extraArgs:
      bind-address: 0.0.0.0
    config:
      apiVersion: kubescheduler.config.k8s.io/v1
      kind: KubeSchedulerConfiguration
      profiles:
        - schedulerName: default-scheduler
          plugins:
            score:
              disabled:
                - name: ImageLocality
          pluginConfig:
            - name: PodTopologySpread
              args:
                defaultingType: List
                defaultConstraints:
                  - maxSkew: 1
                    topologyKey: kubernetes.io/hostname
                    whenUnsatisfiable: ScheduleAnyway
  discovery:
    enabled: true
    registries:
      kubernetes:
        disabled: false
      service:
        disabled: true
  etcd:
    ca:
      crt: ENC[AES256_GCM,data:+TwzhYM/3DVlQ75/Epzybkds5gMckv3a2gPzddFcO5lDYB4bifPT9bOtJTqsQBu/SGDayGZ78+cW6YQMLzE3nql8JZsKvlJzE4HuJD0WkBfcKKtAZfsKSYx+5faC2jJNH2FQSy7TR2zJbRXFS46eL8e5BY+ZOR7iY0bUkv3m2689MNLa/qWbjb6vPkc9kGBFBEptqacXIoLgStUg3u3PHRI4vJMaA7PTsuuhNdv6xJP/sd7oqFiuWE3i5C98zEXbW0NnlGhv8ANi4y0CwbiulnVNuT8aMTWyqZwVmm72jHF7Lj1HtFFGLO53YD4+AZdyjZhrT7H/naphqPEnL3YxrUOSvo1knjY6YkIAy/Hp800qAStvkNvEbnCMFJ7m8PTlOYeCgrrabM2pgeEsL1o+BU8b8dH7faxVUZg16VrgMhW3fureKNLMT+BLaWeWnNx8a6mdIkFoMcwJQ09whHiFBB8wuZnNRFuwO09YMbzy3tWuDJibWi+84gUbxoUEKheEDFrkOW4NjNKz/pzAbJNqvnhyS2rxXQO7O9YzhrFVutmkA3LGaxgakhtcUewrEvPWhrz47VOkk4GNJSEyxcuHtpbLqHlQy6PtmyOcBhV179Cd80jk8wfl7IWfShdA+qMcuufmmHQxAsCokC8lPxMQYMyW+9Hx3H55xD/Z7REU/RG2POkgGjDH8ty8MiyBqNJAH3XO+BXLD9rPxNx77dbX1GUfZwguHqEmZiBcPHugx6aVAN69HnF9oXlV3CCYhdy+dmQFfBvtKoA2EnQBlcNABcbFIZeynDU4lu0CGkdOAKscKi1Ytv8wYiJIXS/wnhkXkfNDbGWnWkqY69s4XvpgeCI4nRYWlfZrFlL1wm7ubuOLhJUKHBXLReeRsL6hYPafmMbMyB5esX8zW6pGw0UMD/vxfkuoMToJFuiegOvw4mRLXlbC5QKBKTpGrlXes6zJ97j0b0kcFEQ/X8Bkch28J7V33f9OJ0wYtcxHuWMH7AIt+B8iylc8tucUUxwa2Wgj,iv:g6dtBh8FNgRoCpXQA1c8Jy1N+rkNknLEqo1fiRSky5E=,tag:70ASLV3nDjL/1pNbL7cowg==,type:str]
      key: ENC[AES256_GCM,data:2oAPkFVG7qEfy2umrFkkhvQgYFQ9+1J1cuqnhpf6uwhc1i+TrTyHZxQmcKxVNFe6JYAHjuJLtQkW7oKb2XM/6GNQMlrBzUHm5VV6D2f9iQcDo5JmRbJgIhpPSJi2qMViPGesLNNtSwQat2SitRLPlcCmy1tDXpH+UkorhrX6vEzgIE89SL2UwPqQbZNoTxYZN8T3j4bgBJmxrHBKPGX2rwLJfbTu/YDsI3DBpUQMx7qTW7p3YgDxXhRqBzw7Q2D26flsWVWDz65Vu+KhGVyxF3+l+qSi/of+Q6r9B2aQSdtUVWmgdkGMREvVwnSV8xWYzjjEoTajxTBhyWlm3pbzdTNw89nRobZtMaUqXQGIk6+LdMNTJ6sOFF6TTaxar0WuqCg7SYrE6AvJw7zWleCF7w==,iv:nHrG9NPbzJa5rwMmLmm4i6iaBjyExcYKEdIvAbmHFJM=,tag:d6T39AsuV5Qr0FVymkBe5w==,type:str]
    extraArgs:
      listen-metrics-urls: http://0.0.0.0:2381
    advertisedSubnets:
      - 10.1.20.0/24
  allowSchedulingOnControlPlanes: true
sops:
  kms: []
  gcp_kms: []
  azure_kv: []
  hc_vault: []
  age:
    - recipient: age1jwm8ccjgfy04r9rwh65rehk72j6rkawkpjnf4rcu4ukwlcfyquhq4p2q23
      enc: |
        -----BEGIN AGE ENCRYPTED FILE-----
        YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSArcFFLQ280dzJMd2FaWlNR
        UytMNmh4cUUzbE9jdk9kY21HSXlHVFVRZmlzClp3WUpNS2lXbHd3eWY3RUJwRjZN
        Y0x3MVlZWmNoZXFGbjNNeDZic1Q3dUUKLS0tIHVocmJQUWkrTlVYRXRiZ3hXMS9H
        MDF4VDNxK2tJMk1zdk5TVnNqb0xwV2MKrhgdvjC9yIVAQRey6mMI10JoL/njZb9C
        WuMwxNmDH2v5pwxhZmr1b2JNh2Hw0qV40VoMTB+3B0e+8ZAD4elBbw==
        -----END AGE ENCRYPTED FILE-----
  lastmodified: "2025-01-20T17:09:33Z"
  mac: ENC[AES256_GCM,data:J1wfu4+7A2R9TfSUOAI3WYI8X1tAXiJv+ylAc9DSw0MsBXCRw6AJJBSSdV7GDasMIkvBOOZLHgsU/RuQDWV7xAJZuHi6JGLRzToTM6rgNd2mt/mJsFBPQz8w3Wjzc55d1vLuJ5Lcj8nJS1cDiHL/YVlLTafvuScYiN8mrT4uXmw=,iv:ikFKT0/zpQhp+dOstKjXTbHOiqTkXl/LXSgZBpmBdzw=,tag:zJ/8S9bawtU9tqq4rAopzw==,type:str]
  pgp: []
  encrypted_regex: ^(token|crt|key|id|secret|secretboxEncryptionSecret|ca)$
  mac_only_encrypted: true
  version: 3.9.3
