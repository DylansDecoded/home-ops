version: v1alpha1
debug: false
persist: true
machine:
  type: controlplane
  token: ENC[AES256_GCM,data:BUIXOx2WUHHyceBOoQZKtCFtRfyZ+Ng=,iv:B8PfWGNuk/cWYPIF/hFFA3271Mt1owTiC+t1FCyOtY0=,tag:ilhAWJxMyJFSpf+N1G2kpg==,type:str]
  ca:
    crt: ENC[AES256_GCM,data:0oA89ci+XOdeosO/yAInyyZVHu6/kj1C1/fF61hv2x4aI7/LssVY9MUiiqZDJQisuyuSJBN/pVU9i4rGfQyyv6x9U91sZnkPXMxmuy/mXK144FDIJ4Pr8cb6NteeNcjrzN8MUA/q1WO1c6Y+torZ50Yxq4njgc4UrBlpYGR+L22nMsbuud/AXJw8a3M2icCIJQNMSfyNUPW1/M+IO3Eq35I1puGGvAN9w9Db1V8nt3ki0ISm359W25n37gllbBZGh53qT3IGAebAxUMHyN8Y8MOPSB4HzqISUUSDzEARrujyQUnq0hsZrWgN9yjEmKYRu+6x+vnylIAEXsIygZi7hjs6v2cKheGO6HZHgJHuJV5eGl/RR8sgeW0xjVddNAMB+rMepMNDiEYqAV+jsNUJPxo3X04TgchTNHex1iRyMk7tkStnhVN/ArTIqwyH/ibaA+BYY7RAGjGFEF2gvPjE0QD9db+X2REWpk3bysWABEYObMikKTCHRiambLIMA2nMnvWNS1qZORUaHG4AIrqe5mYjiqTtvWQ/FQsVlPfvggq5mivoQKBK79jcbMGk9K/iGkwZvhuqXjj5QoE/ShXg0StI++qaIto216QFTM/I1Ebu0ueqCdy16pld4bbvmH7Gc8ho+T3zJ4wjgqGHDKlD0fq9Fdzq6GpgzeCDK6v1z5/38Y3tsW0DtI2RDXL2LXs4EqnA5J5CI0PMYXnhHLophNAQTc8M4DzgjZmew5yiu1RHF5fczJrORJ7R/J6Dydpe/UC48IEC5vwdutOWXXoaXO0QhxV76WeqIL7j1pArx/WCtrSKwJjubsGJznMTFmAeoeseb8QI8b9qoHzomWfF+IRHu2eMYW/QtjcDFKgK0XXMo66V,iv:4nvEafEkKvBA8LyImJTXJZPBrhJTRh0BBfdItBdZZU8=,tag:YXQvcgc3nu/VLmOJ+tZm8g==,type:str]
    key: ENC[AES256_GCM,data:nSWN1/FWjMco+gE6hmPMF5QXuZ/QEcb/2IePWoG8VOfx1niAM07N+Z63tKIsxvYSR7rHTPAsB9szVacO5gM5xdKbZVQL49rmiI0rc5uct5siPRglL34qJKNLhDhbzlUveYSTtgAs/jdys/gGNKCXMzPjhiRV8+aT6a2z2Fm8e7cOlyqagFRxKwqtW2ExEVqkD11Skot5gDezVtOmQr5lJPqvVaRtsDajzO57J2G/McXEleXx,iv:0x1+7xu19bDt9l1ZfGzqy9QScnN0ZFvUvl7AKM4QiXg=,tag:2KGKIL2dp3sotJZ7tt2HAA==,type:str]
  certSANs:
    - 127.0.0.1
    - 10.1.20.120
  kubelet:
    image: ghcr.io/siderolabs/kubelet:{{ ENV.KUBERNETES_VERSION }}
    extraArgs:
      runtime-config: admissionregistration.k8s.io/v1alpha1=true
      feature-gates: MutatingAdmissionPolicy=true
    extraConfig:
      maxPods: 150
    extraMounts:
      - destination: /var/mnt/extra
        type: bind
        source: /var/mnt/extra
        options:
          - bind
          - rshared
          - rw
    defaultRuntimeSeccompProfileEnabled: true
  network:
    nameservers:
      - 10.1.20.1
      - 10.1.20.43
    hostname: k8s-1
    interfaces:
      - interface: eth0
        dhcp: false
        mtu: 9000
        addresses:
          - 10.1.20.11/24
        routes:
          - network: 0.0.0.0/0
            gateway: 10.1.20.1
        vip:
          ip: 10.1.20.120
        vlans:
          # Trusted Network
          - vlanId: 40
            dhcp: false
            mtu: 1500
    disableSearchDomain: true
  time:
    servers:
      - 10.1.20.1
  install:
    disk: /dev/nvme0n1
    extraKernelArgs:
      # Use eth0 instead of eno1
      - net.ifnames=0
      # Less security, faster puter
      - apparmor=0
      # Less security, faster puter
      - init_on_alloc=0
      # Less security, faster puter
      - init_on_free=0
      # PCI Passthrough
      - intel_iommu=on
      # PCI Passthrough
      - iommu=pt
      # Less security, faster puter
      - mitigations=off
      # Less security, faster puter
      - security=none
    # gasket, mei, intel ucode, i915 driver
    image: factory.talos.dev/installer/6e6f23cd5ca6099bbe4be57a2218f628e61314545d5da36dcc6516c59d3be64f:{{ ENV.TALOS_VERSION }}
    wipe: false
  files:
    - op: create
      path: /etc/cri/conf.d/20-customization.part
      content: |
        [plugins."io.containerd.cri.v1.images"]
          discard_unpacked_layers = false
    - op: overwrite
      path: /etc/nfsmount.conf
      permissions: 420
      content: |
        [ NFSMount_Global_Options ]
        nfsvers=4.2
        hard=True
        nconnect=16
        noatime=True
  sysctls:
    # Watchdog
    fs.inotify.max_user_instances: 8192
    # Watchdog
    fs.inotify.max_user_watches: 1048576
    # Cloudflared / QUIC
    net.core.rmem_max: 67108864
    # Cloudflared / QUIC
    net.core.wmem_max: 67108864
    # 1Gb/s
    net.core.default_qdisc: fq
    # 1Gb/s | Jumbo frames
    net.ipv4.tcp_mtu_probing: 1
    net.ipv4.tcp_congestion_control: bbr
    # 1Gb/s
    net.ipv4.tcp_window_scaling: 1
    # postgresql
    vm.nr_hugepages: 1024
  sysfs:
    devices.system.cpu.intel_pstate.hwp_dynamic_boost: 1
    devices.system.cpu.cpu0.cpufreq.energy_performance_preference: balance_performance
    devices.system.cpu.cpu1.cpufreq.energy_performance_preference: balance_performance
    devices.system.cpu.cpu2.cpufreq.energy_performance_preference: balance_performance
    devices.system.cpu.cpu3.cpufreq.energy_performance_preference: balance_performance
  features:
    rbac: true
    stableHostname: true
    kubernetesTalosAPIAccess:
      enabled: true
      allowedRoles:
        - os:admin
      allowedKubernetesNamespaces:
        - system-upgrade
        - actions-runner-system
    apidCheckExtKeyUsage: true
    diskQuotaSupport: true
    kubePrism:
      enabled: true
      port: 7445
    hostDNS:
      enabled: true
      resolveMemberNames: true
      forwardKubeDNSToHost: false
  udev:
    rules:
      # Thunderbolt
      - ACTION=="add", SUBSYSTEM=="thunderbolt", ATTR{authorized}=="0", ATTR{authorized}="1"
      # Coral Edge M.2 TPU
      - SUBSYSTEM=="apex", KERNEL=="apex*", GROUP="44", MODE="0660"
      # Intel GPU
      - SUBSYSTEM=="drm", KERNEL=="renderD*", GROUP="44", MODE="0660"
  nodeLabels:
    topology.kubernetes.io/region: main
    topology.kubernetes.io/zone: m
cluster:
  id: ENC[AES256_GCM,data:URYe3WITsTcaymgBn9UloHpwhIhoisYxdeSMdqTIhHlo5v571WLtrMe0+Lk=,iv:f65KCsDlwVZrexaSFQUa82tVD5Egy4SvE6ugRffsikE=,tag:Jcqnq3HTj9Zpcsy2AivzNw==,type:str]
  secret: ENC[AES256_GCM,data:NgJ6SuTzE/utRe1aT7u5JkavuF60uqSbzsDUEY+w3gsrHxH3pxXC3R1xq9Y=,iv:j9YQpbB040FXSasw943p+G24ftJumCPIQgXo0a+3Rm4=,tag:Gzih0IPqXrqHDvJbCxmzyQ==,type:str]
  controlPlane:
    endpoint: https://10.1.20.120:6443
  clusterName: main
  network:
    cni:
      name: none
    dnsDomain: cluster.local
    podSubnets:
      - 10.42.0.0/16
    serviceSubnets:
      - 10.43.0.0/16
  coreDNS:
    disabled: true
  token: ENC[AES256_GCM,data:FtsaPomndgZ/OkcDKeTKq6lq2Cp1s2s=,iv:3bc11kqoy/GiBPum1O4WSkeb3rO329QBu9gXSNhD4pM=,tag:UhRLrNNtUMK7aMr6h68H6g==,type:str]
  secretboxEncryptionSecret: ENC[AES256_GCM,data:ovOrF4j4U7LSu1Y+EQT3DEJ3awsKR0cj0lraZ/0LvUG07QKEEgo4/M3wC/E=,iv:nTX1KzTeQW7HWvNL8NNlbtULUsksQXD/Id2kDxLoUAs=,tag:GQi70A1Nd96xm2DvPa0R7A==,type:str]
  ca:
    crt: ENC[AES256_GCM,data:W0DgawGxZzjurgeNt+nyUU7omd7n+QeejeqlIr/kMl2usAQLf5Wb5a4Yl8BKyr9h3Ss8474tzoWcAPI5tNf8N6DxRlUAytbNQRsCgkX2BdmeahT7WHjo07FQuJeiswzI9Sr/quO2SwpyhJDaGH8QZBIK8pMUsh0kRlYteQPjm2rjNk0AzACaRsuPklB39Zv7XxwvgZ90yofOmUaizw9f0LBSxHIsoNZIKc0xV2ydPMfrayrG1d65TAKcIilKZ91G8wWA2GQWv3df87RN/QEf6hh64ER7D6Pned5Ur0gw3VmtrjtHPL9FlRsk9NA7njqNIHV8S0Nxkz2Fp6CUytj5VCTaVNSMm+4Lcvvg7W8Qk73fbx1WYL5NhStWizMQAI3f4EcEfc8NJP9lK+JyNtLV4TmKLR0w+QA7/9A4kgtd8YZj2LIbzQpGEHtOrrNa4fPi/WnvBWIVTwo7FEAYUHUAAUbpMyPu70u6PO+4Efx8oUH+jvQYE3gTwZMOfbhOBWOT04vhR6hK2JF6Rq/wCeBhknHuxV4l1yKe1y5uKTGZQPFXwbRAD2DJO4cCznNvEyzgS3UDJM/F9GU05E9mSzLQfnIwWTi+c34dcHSUwncwEs3DxSvhqP6ZEI9RYtjZueaCasw3xpCFCJQBPGWotPysIHqF/GoM/v9ouhSIx/4dakz45lj5YbBfcAU8Tx/sGuNMKKWMibxRkS4FTowzEEmOp6Wlgaj8hLfo21bv6RdaFh8KepToYvbMtjYtT8DNOa++/ahZjlK6ApCZVzlRSbfhqAykGNGMEabeTL54/j54EQCV3YN6Eu+cKwbbMSi6rw9a3bcKLlpUqGgVMffYoXpJnAu6grmHsdksolGUA1qRH9S191NTiqFz6520yqLyTGIKFO0MA7e+aTqpEh/CL1/aIpGEKQ8EqoYOK/xeUc6wnMUJHR0kHJAbICRQaLqfaV1hsLlpNjz0Ih+YIdeDwSwGf9Y23U8gH2h6IH4PT6J4cH6BwDRwAVwG+/87B36Ap5Zi/VXB8nqTS3x3lNUAAjcMQaKOmyg=,iv:XIDUecrwGMJKaQ1E3SHFylga1bg3OMnoKJ0pJmPxhp8=,tag:yBDnpDPlSjbiYpt2Sj6lyQ==,type:str]
    key: ENC[AES256_GCM,data:lLFlou/UEqRchXkdtTYAlNLRNPWzErIK/BiEOTklF0P6iIAj3xoXEVaJaPtd4gMR81M64xmfshfkx8vEnrCUW2ZemOY12oM/tiWBk/51/9+U6xBaUHrpn437YO1Qf7S9XRCPs9KiL+jbIBYDFFCH0Dnl+Bluh3tm9Uft7ff4TqVfek/I94wQ0wkNKlljF7Yf6sYovnT/FfNjtnbq+D3pTXdYDevLNWpTcUVAFTG1+aN6jAauGR0RsKUI/uB+I7qiRFFy9khTtf00wOijTAaZI/hxcJjeOZfb5bXaqc2c2CMtTjsVmedjCnqyRCjV6p7CtbCIC+HCsrJ04Bb1B3yUrAi8lA2nJQOPGkCgP/0lYnZvezNpfc0QOybgnhp/BybU7ksugxJqBFuKwlgGLpEjDA==,iv:ljbC2oOjtMyGy8/56OnKf4rKK0geHVvOdl/PDqIO09I=,tag:0dsO6P1kRGt+2y8L8w873w==,type:str]
  aggregatorCA:
    crt: ENC[AES256_GCM,data:kM0MfUIZqBxKBChJZS+byxhoZbGM6yRo2aQIFhg7FAtCxpwjf3nQb2yykcPOXffjn2cQJ07w/bkvtg5M692WqD2+yLnfy0AKPz8WzvJHqptwG6FSONT4H47EeToLpsKiC3DC3O6RtnwhElBgUqOzl+Dgt+pF/jwLf+fx2dou26Ng7mePfjpBoHj6k41P2zOb4crKz2r3tf/njjyeTVCJhRUWya7WV1AsP/kuASr5z/HquDH9GFiR1a2D9FradqNDWd8n2mBzQz8JYb8H/PGL2kMJsZ0KybM3CHihtPf7hS/HIe18n3cduC5+K40SNZkfistbAt6h2NAqd83gSrMrkqaWVIx3VQZxhChHn0Qa/NLQ5/XEkG/+RR95mLGwa90O1ACIM2b1PPtMzmY241oND35fxfa6JSYVl6/AnAB5ogN28S9mx5MfKZQ3W0yqHYFEDBRIbFZhy6YWn0R1cxym5eO6Z87XfNT1VcdVp+IfVKHQriLTJQba8YuHShogXXbQoO48CzcxZO8M6HkKnmoYs9STOn2Ag5My4bUa8Co1GYyFLoW44gOsVKJC4585RBniinaID9O0uHF7J9h3tgQf35I4XBjQdp6OxZTIP9kcDhuO3v1j1NRav5KkFaMWScfO5zn9+7wJtLdOMyHRDweIMTzd58dYQPW2S9PtlMbNGcvRT4QPoNb37Xut9EutJxjDGxXbHGj3215hRmpMQvuRycMpFxXD+lZ/tsRfDcZq1luqELcT5fVAzQRpqIq4DII899hGbHe6+J5Z1y1valQA/Cppd1XFe5XFXkp2trr2tLFJdB3hFuZr5ois8cELG0J3hCWDWeCFJCq2Rq/2sFKfG7D6UuyEs/KLbJqHin55gZxGNbEy5zZwd14ZMKXXkwHCcg8UbTHJAKy0t66YSMVohwqKFE6aqo0+4yw15TDesmAE6YChVaks1YUcvJqZ4pF7,iv:3k7386oaCPmyZD0QTAHA6PDJk/jF5aC+449wreJGrTE=,tag:tI10k4Qjz92dptmKOXHG7Q==,type:str]
    key: ENC[AES256_GCM,data:t3EeFJUFbfEKGSl+l/JJBSVsG3ZGDVWc4xVCFPnY1etPRTBBz2spTHxA5euYQl8MuclrIQMmJAeeECtUnxcD3zb0UdR5/oqV/+We2jr7JzgysFjYcyBFIiURziYYdN/ah+IBtYKNmbN8poV6u4+cJKRekUZ3KWdkTNrZZTgWmpLzdkfX2jwYEtdBelsp9uYs7Jguv1Wk3GeEuZSLbjyg9ZxtGImNlVksD1SEtlIDKIhbkTEqigpI5N5xjfMBw03PgvXt07wq0xPWiKywQiLAcpd0jCBM9QtNs8QNAodpmyDYy08Szit4oqbmFlMn5dketoJaoMEpQUmq4Gb1gGRCAA+/XZCB82vqJOT+ksJc/K5SDYDvHJzHoRSxF4rVh27EDUNAwe9WOZDPy1kMQheHNw==,iv:kPJZy5/9PkQ3cmFjfdWLVtYFMbQk6dRaRcQXTdLDlyI=,tag:hwra9E5hLtxPzDey7mmG5A==,type:str]
  serviceAccount:
    key: ENC[AES256_GCM,data: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,iv:pNc2BWeAy8A9JlwyzUelmDMGDSYICJ5Gkn7iRrnNH0c=,tag:HAzTWLZXimSng154hNqlVg==,type:str]
  apiServer:
    image: registry.k8s.io/kube-apiserver:{{ ENV.KUBERNETES_VERSION }}
    extraArgs:
      runtime-config: admissionregistration.k8s.io/v1alpha1=true
      feature-gates: MutatingAdmissionPolicy=true
    certSANs:
      - 127.0.0.1
      - 10.1.20.120
    disablePodSecurityPolicy: true
    auditPolicy:
      apiVersion: audit.k8s.io/v1
      kind: Policy
      rules:
        - level: Metadata
  controllerManager:
    image: registry.k8s.io/kube-controller-manager:{{ ENV.KUBERNETES_VERSION }}
    extraArgs:
      bind-address: 0.0.0.0
  proxy:
    disabled: true
  scheduler:
    image: registry.k8s.io/kube-scheduler:{{ ENV.KUBERNETES_VERSION }}
    extraArgs:
      bind-address: 0.0.0.0
    config:
      apiVersion: kubescheduler.config.k8s.io/v1
      kind: KubeSchedulerConfiguration
      profiles:
        - schedulerName: default-scheduler
          plugins:
            score:
              disabled:
                - name: ImageLocality
          pluginConfig:
            - name: PodTopologySpread
              args:
                defaultingType: List
                defaultConstraints:
                  - maxSkew: 1
                    topologyKey: kubernetes.io/hostname
                    whenUnsatisfiable: ScheduleAnyway
  discovery:
    enabled: true
    registries:
      kubernetes:
        disabled: false
      service:
        disabled: true
  etcd:
    ca:
      crt: ENC[AES256_GCM,data:c6DH5Lg61dEEaC+Vd5S43Sslcp4sqP9xfiBSMkV5tLVjU8WSYkyiJazuHDu5Cjbqg3V4xSSymR1857lRxGk7LmSKMdVHKZYejSo6OIkhuM6CaaJpJYr3wLQOZEZjsKlfVzGsYvp/4B3EL+2cIC+T1h+SZ+r+Sjs4Mp1Q6tLtAw/x9A85lIASuDiHY4+h3FYgsWLANIJudYfUMOCbJnYaWHuxt5l3jgafJo0Yzn5QYgS8PbMEdgzxYF1Z/Y2XJUC1LggeCRgVF5cI9jfc440PN3H0GwG61F9A4VCmShe0IxX11lqe9WSdUrFW1DZ0XvgBYEWP9ZTwqs671qRnWj1gqUFomUCbf/yhb4eQ99jzkyGn90fXJnmoMwl8ZrJxRLj5erW+bB7PHFBDWm2XJqB1GHzDoumpElwtWR39F/2LUWomhzi9kM92sgvADh8Q1rXXXS5pC9f7gpTH/x2R6c+ZKu/kvx7HLv8L0BMHQmVXFLhXX2wWCG3iHQ3PGx+qCGT31Mh0OaWWgjvM3LKYTW1SKz6eNV7GLah+cfivwexDFtHbnApiIGkkDC+ejh5dUZ0XfIjND6uV5az+1keWh4/clGL7D57jhXR0jVZHoqhn/cRRZsnwYy0UBjyWybi/QtXXhNLPZhL+hao1/+s3aKKpyHIVfeoTndLReSBMPIbvA/bMxiTqUvkv4EYN7mJMrcFWGL1EvdmIZbCVVyeucsDYzrumRyEx1FBqKaiXdYm+iF1BGkYGgKdqb110cRb6gi9E9ZLQZKGN/c2A5w/eaUvvMaHFb+ZTm9lnVAdWB94VIjUK8V0QCu93woiUEc66aLskl4VahhUqx9zwjFKhwxNVH/x06QBApkigbl92ZDpA+IowP9dX7rLeR4nxrbF9gizpAtnKdqQd2EdENtykZvff5qeiNrrogfU3RtbCS05MqKRwog3J0SeQscqaocJ+6hwWr8/oUXKCuri6Qix/InBz7K85zTDHnN3q0EYQr6wp5bKe5PHj0O06IXSrZGODZIT8,iv:X3CCkdHvudp+4IdRBKNPUgUmxmLUGabDRhVaggHU1ak=,tag:u2JiQJgKwPopXz1waR0pEQ==,type:str]
      key: ENC[AES256_GCM,data:CTn7CU9Mddc0sT4TRfhGkgY+F1tCeDLCSyKYiOaMCIMej0P5gD/ntvJuOYuaLuXoAN/kPwukpICHWifNj7dYjUytuQlGE7B+odNvf1w/4QrreohChrMp9Z8ws4s1GhlxdOEAX2JsndRi+X1oAQtNMRCCSZKF9mPyzqWORzDtqMEs/QA/p5BT2NqDfxRri/uK2gFWdBkyOvl49wwpZRMzVdeNAjN4stdJaGWczia3iWtQ9PpXbRdVx06zZPGnMl0f+IOTy0wjwSwTRtYA/AfAxInjcgAXFpMwVK32JbLxGleWLLNGMfVT9gH1hvja06J6ibsSe2grlWICwthLRpEfDD6o08KXt83WNd8netgIA3hPvkU0/GWYIbkozIRTbkq/t9ddTBxSx46rwGhCR2o/sQ==,iv:NhJxNv5Yh3bDfIgeEMryhGj6yvKaJf1iktsZUOIWIpM=,tag:k4tbXaDeWCiejffX56zLOQ==,type:str]
    extraArgs:
      listen-metrics-urls: http://0.0.0.0:2381
    advertisedSubnets:
      - 10.1.20.0/24
  allowSchedulingOnControlPlanes: true
sops:
  kms: []
  gcp_kms: []
  azure_kv: []
  hc_vault: []
  age:
    - recipient: age1jwm8ccjgfy04r9rwh65rehk72j6rkawkpjnf4rcu4ukwlcfyquhq4p2q23
      enc: |
        -----BEGIN AGE ENCRYPTED FILE-----
        YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSA5ZlIyR0hlNk1xQTNqVkN2
        VlVjNjh1QTRCUlNuREwvV25CQTluVVNPUm04CkFpeXY0MEQxazJLYWRUU2xFWDBo
        cVkwVmRzcjZ3OFN0bHVweVdDQUMwTlEKLS0tIFFUcnMxc1V1K0lVSG8yekkxcExY
        SlpXSEhENzNxZXR2Z1FHcFRIZWlTWTQKuAXJflCueIxc4kDkU4s5bVks7LaqVlUO
        wZMbHTW1iFjhbaxYhPu99Dm6md1YSYXxqwHdnRYL7A1XKTm10bfaxQ==
        -----END AGE ENCRYPTED FILE-----
  lastmodified: "2025-01-29T05:00:37Z"
  mac: ENC[AES256_GCM,data:arWQHJc7YQjipenYB3KMmUBrifAH+8ux16GUGM/7N37v0XKov17t5Gvt/3ydyzegteGVUCOIZ7jLbe4okQ/46Fo2lC3mccIp/dt0KHXNumFmjaoPadHLh396z77G7lz/Ac5rANlAp/oihT/K5Tiz7oGJC8yKdBpXX7kXsYqdd04=,iv:qBNGXhT08yOSFVQmDP52RXzEnkMhHrJbBvyamBE2EFA=,tag:rClEDmXQRkhXnnUr6ZHtVw==,type:str]
  pgp: []
  encrypted_regex: ^(token|crt|key|id|secret|secretboxEncryptionSecret|ca)$
  mac_only_encrypted: true
  version: 3.9.3
