version: v1alpha1
debug: false
persist: true
machine:
  type: controlplane
  token: ENC[AES256_GCM,data:Zk2kKM9KBI9Ae8N1QPA7WFZIz+gp0/Q=,iv:7PQHr0I1jI6DLUNhGhdwjpRQE8yuQVzfgDLPMWoglt8=,tag:DjRfOSp7e2Ji1Rem1STnPg==,type:str]
  ca:
    crt: ENC[AES256_GCM,data:3tsbSt1+SgxaERXRoa+E8XbTbRuWjdMO0bJwHuLBeRTi67u/yg2G5Dx5qV+a2X+C2TzmucSx4OHtLLO4H28mTZzwKcVw8mhNTYGc2MR2KPRllklEAY1XRYNa6rdPqxrhuA1A49VWgXySxaduUH4iJDh4rOsNr5bCNkyB8qHtR9QfQ8u0oWX9dkPiWbLxDeJi0T6DBt4amYQrTFtzfgSWJqn288/Jcw8EIQGvbB8gbsi4Kem8f2iQsFMENQMCQPRLGcnQ4IXfZWziLp3imcDpIfn0pjDJ0ocm9K6vAqOsEN64UfVJD6KI+b4bDJYZkdQe3KTsKAi4QjsT5djN5UxENoOT4PKE8pDfqGkX1wY3G6szYcikTy+zvwtiilUQ0Kdv9ZXpMEZr9lfGqAI2ghuOrmmhUfml8zHJw0x3NlSDuZ0ll7V7fXqle5HyjAO8T8WYLvFQiMnHRFg3IhHpSJisGqloy8TKlPldjLX8nEn9pVZSBUuCALo2277FIUlgYbTCouM23JAWvaaLlUVyWys+QLfKJyQpeRi2jx8AdlthgLmUKVPRpxLPDJkBGbKFmpvD58AhFJJV4w9fs44k+lEEmqnsy0iJe8BopTfM/797Kj2+Lv2t9sHkBmt21Mbr5YyuK/8s6QvVrMZX/iK9xrpK+SU9iBq0iX2goQWy6ceCYzp1DQ+9VUArHe1UWx+hhmN621dqNIvK6FUjtv6i1aNHz0vI8qdDX04Nju031zcNLYmenSmKEIR8gO+ekRPnZwKMNLWxpyX9Gl0o41nUFDPQs3DQ7tC0hvrHw98xRP+vjSumtVYNHVJCOFXajK5/CxDysxp95xsk/b7YJOt1uoWIy2no6HcuG/IWo9qGE5jPkKaO2Bk/,iv:5JctoJ3uJJfrCrBPJy4CmC0NUbH73oZ9Dp3slfcle+0=,tag:UI9OmRYeOgJG3QXkvEr+xQ==,type:str]
    key: ENC[AES256_GCM,data:iOo3yoelkmCzvsy05RBAk7YZzhR/FD8i4VQ3B3DJwGhH4/o/paILvKW2Ys8WQbLxji2y8MA+YeHUEv8qE38J9lTH0xCzNsu7fxZ37Ru2lIcKRP0hZd6YmiPE2qzeBSvlX+VQaGoC4s5I9y5tB3nJKBoJuv00oix8OlSpUV6XXtptNL87kUIyFrRZaCRXLNktcL51Hv1S7PKKSgmvwrWCiLGHaTPFXHtawCex71v8MZZ5U0bO,iv:9hhm9me/av7M/4WDY/m+TPpTg6OIf3nn51AOx5JO9z4=,tag:oUAcxfXlm9MUTc5HLTCBOw==,type:str]
  certSANs:
    - 127.0.0.1
    - 10.1.20.120
  kubelet:
    image: ghcr.io/siderolabs/kubelet:{{ ENV.KUBERNETES_VERSION }}
    extraArgs:
      runtime-config: admissionregistration.k8s.io/v1alpha1=true
      feature-gates: MutatingAdmissionPolicy=true
    extraConfig:
      maxPods: 150
    extraMounts:
      - destination: /var/mnt/extra
        type: bind
        source: /var/mnt/extra
        options:
          - bind
          - rshared
          - rw
    defaultRuntimeSeccompProfileEnabled: true
  network:
    nameservers:
      - 10.1.20.1
      - 10.1.20.43
    hostname: k8s-2
    interfaces:
      - interface: eth0
        dhcp: false
        mtu: 9000
        addresses:
          - 10.1.20.12/24
        routes:
          - network: 0.0.0.0/0
            gateway: 10.1.20.1
        vip:
          ip: 10.1.20.120
        vlans:
          # Trusted Network
          - vlanId: 40
            dhcp: false
            mtu: 1500
    disableSearchDomain: true
  time:
    servers:
      - 10.1.20.1
  install:
    disk: /dev/nvme0n1
    extraKernelArgs:
      # Use eth0 instead of eno1
      - net.ifnames=0
      # Less security, faster puter
      - apparmor=0
      # Less security, faster puter
      - init_on_alloc=0
      # Less security, faster puter
      - init_on_free=0
      # PCI Passthrough
      - intel_iommu=on
      # PCI Passthrough
      - iommu=pt
      # Less security, faster puter
      - mitigations=off
      # Less security, faster puter
      - security=none
    # gasket, mei, intel ucode, i915 driver
    image: factory.talos.dev/installer/6e6f23cd5ca6099bbe4be57a2218f628e61314545d5da36dcc6516c59d3be64f:{{ ENV.TALOS_VERSION }}
    wipe: false
  files:
    - op: create
      path: /etc/cri/conf.d/20-customization.part
      content: |
        [plugins."io.containerd.cri.v1.images"]
          discard_unpacked_layers = false
    - op: overwrite
      path: /etc/nfsmount.conf
      permissions: 420
      content: |
        [ NFSMount_Global_Options ]
        nfsvers=4.2
        hard=True
        nconnect=16
        noatime=True
  sysctls:
    # Watchdog
    fs.inotify.max_user_instances: 8192
    # Watchdog
    fs.inotify.max_user_watches: 1048576
    # Cloudflared / QUIC
    net.core.rmem_max: 67108864
    # Cloudflared / QUIC
    net.core.wmem_max: 67108864
    # 1Gb/s
    net.core.default_qdisc: fq
    # 1Gb/s | Jumbo frames
    net.ipv4.tcp_mtu_probing: 1
    net.ipv4.tcp_congestion_control: bbr
    # 1Gb/s
    net.ipv4.tcp_window_scaling: 1
    # postgresql
    vm.nr_hugepages: 1024
  sysfs:
    devices.system.cpu.intel_pstate.hwp_dynamic_boost: 1
    devices.system.cpu.cpu0.cpufreq.energy_performance_preference: balance_performance
    devices.system.cpu.cpu1.cpufreq.energy_performance_preference: balance_performance
    devices.system.cpu.cpu2.cpufreq.energy_performance_preference: balance_performance
    devices.system.cpu.cpu3.cpufreq.energy_performance_preference: balance_performance
  features:
    rbac: true
    stableHostname: true
    kubernetesTalosAPIAccess:
      enabled: true
      allowedRoles:
        - os:admin
      allowedKubernetesNamespaces:
        - system-upgrade
        - actions-runner-system
    apidCheckExtKeyUsage: true
    diskQuotaSupport: true
    kubePrism:
      enabled: true
      port: 7445
    hostDNS:
      enabled: true
      resolveMemberNames: true
      forwardKubeDNSToHost: false
  udev:
    rules:
      # Thunderbolt
      - ACTION=="add", SUBSYSTEM=="thunderbolt", ATTR{authorized}=="0", ATTR{authorized}="1"
      # Coral Edge M.2 TPU
      - SUBSYSTEM=="apex", KERNEL=="apex*", GROUP="44", MODE="0660"
      # Intel GPU
      - SUBSYSTEM=="drm", KERNEL=="renderD*", GROUP="44", MODE="0660"
  nodeLabels:
    topology.kubernetes.io/region: main
    topology.kubernetes.io/zone: m
cluster:
  id: ENC[AES256_GCM,data:N0PladbSaHnqcMowHaAfzFBsN/z7u0SyMYezUGsSWlyKMtfoW8nyfNtsjT4=,iv:EtzXccosuFXppvm30TRSZRFprK8gNVL+sVehTIDIYk8=,tag:1LPIxMz2IJHFqy6U0gh2CQ==,type:str]
  secret: ENC[AES256_GCM,data:ual/Ydby8YV2deZsxj0yQ0SU5GsxyRDx9KOuZuJA0jom1Bc0irEpXqOtKqQ=,iv:2/u00brVKfw6AMCS7KPs/D9sI6aCkXkU/+jnAjWeOr0=,tag:V29HOZJjmedH/CpPhCMeXg==,type:str]
  controlPlane:
    endpoint: https://10.1.20.120:6443
  clusterName: main
  network:
    cni:
      name: none
    dnsDomain: cluster.local
    podSubnets:
      - 10.42.0.0/16
    serviceSubnets:
      - 10.43.0.0/16
  coreDNS:
    disabled: true
  token: ENC[AES256_GCM,data:RtHd3XjJjEeJoyt129RKIjN+XALXoys=,iv:NMxQe8l7lvqSuCDgKcTf5lNMq0HnCTI5zxVYNH5vCZE=,tag:jyUMM7c8UlAtxQf3OWMf1w==,type:str]
  secretboxEncryptionSecret: ENC[AES256_GCM,data:bQMp4OdeMOkP9+ZOw/ZTC2IA8D7O+UF1qcfMV0cHaLumyADcN31uAEJPDyk=,iv:7pWzWOv77VZtWkHlzNDP9Ve5xVUxdgL+1gfIs0DWpUU=,tag:rvK9O/oht0egEVCXhL+IoA==,type:str]
  ca:
    crt: ENC[AES256_GCM,data:0oZ2zUcF2XnufVSzDQg/R3jL4NgwwQ4bL2z5RIUt+LMCnhxBaRaxm6XvGtIDTfMnbT1unx7HsDRX+rUY3lbM+K62ZovhBfc4LuhX3g6YsjMe3rpvv+xJM2/aSC1uy9Dp3DUnmGB5pDczhkJVFfyHfOSokxFS4XrmOF8G/EKKretDxDWUIcu4e0O5Z0tydRIn+jMZ5ayspcyJlmOFE6jsxDCQtfjhsHunxCQWfS2SgyL6HCsQJCYmkMpxHWd0kWsAsnEZQCNjPjK1tUTq55tS/5eaDMfoTJxyBMo4crlrwyBKcR7I7Cb++4jvH2NdKllaH2d3/nVN49Upujsk9gkZf6nTFPd/sv2LipvCQAgb5oJm1JY8osHc98w/3JfVK/44SDAABU7GoiBsB/XA0kLWBTW1PmjilZ9cLhc1EhBcE3qOUcvBd6t2qaLHGjwCt3tDOdCpFvA7cljXQHrVIylfoOqNktNUvt/KYGLUH2owBNRY5h3kv5qQon908KbwhVslRAMFY+pni5FcKumBUR9Uf87FMz5K6zwBBVhTigAbis3vq34/rfZ/uPyhZQ2etCAhvBMc5oTDjN8uqPSUfkjuH9ZDcVGRY0CZiPPOjlpsAOj6+wYlB/yMc/R+siYcFQKWDPkozq8m53qq3WNyDfYgXzI2AYuG6iLvmQPcIwJk5cE2+mvIi9lUB48qdy8Lw55RUox2sNJcePPp8f5G+DmWKruzYcZUFfShG6+28mslenLpfkl9/7zMpTIodnAsVs/ptw9x2LsCSb4aGrDE7rJQ25Yqby3s+5QL48o8ZP/3j7MprbAECkM4uPeXx35jV/riXqEix9qDC7vEoxoUdkIUBmcI2L+YZmosXdsGcKMzJfKWvbjMD4WGKhTidljHWTAsXO9ZHsNMhVDzWguYijGJfbV8bwCKv9/qpFQD7zceVbCA9K08qifbgp6LrbjnWHVp//d/PukNsLuJOUiatp/FpEpOeoOWfm9zdxWQaPQE0Jgm5FaCIajAuFJUS3bAOD6V5OB00x2IdMx6uZc4zP3EQ55xzXA=,iv:GS0vkQCorPT0RgpSuVIlm0HqbR1P0bPGD2oQxlOYJGo=,tag:s9ufdmQ0eEdUxwSerq0ltQ==,type:str]
    key: ENC[AES256_GCM,data:fSl+YV3PAkYzXRGCicNZ/64xU7CuiYUGKK5K6I7Wr6bYsox0QyK2jasT3FPcZn6LnrDWvnRZg4WcERiU2xZ77x6nOkp9Mcjqsi+zd+alz41bRYfg1r/xpIoOlZB2qgxnDN0+EHBa0N6pO64ZysO4SV1smbFIsuX+Fn9kIvfzo/8MUsOD7vFk2azPvU1HVAyPiU3tf/TtqlvAoINHUthBF+CxlZMx911hJimiZ0jt8j82CYlU14RA5BaHN3wE7QK9MWT6lu7QRsziT3t+EH0qqebwC8fgsUlHHNeRuvJg/0G1XheTR4KOEqq/OXzAKsf625jlB+BPS7oSuUTSCyoRNi1RixKohZdiG/vwAs2/WN615wTGhDmGTrTA0CXrEdwTV27vCxnm/Gp0f0F8k7uP4Q==,iv:sMkJWbSjclep9EMdLPtCHJX//3E+m8SSbqFQgFosHdM=,tag:ofRp+wS9yZ9fEn/mFAjoqg==,type:str]
  aggregatorCA:
    crt: ENC[AES256_GCM,data:cmnzm1BEjT+iNpY6GjrBhFYczwi2MG06pjInqaswDzzDFGSzZqNM7ttVFRUF+FlixOOnTVzaPL0Bi0iDSEmYTNgyDBkmo6z0K6o/DWp9Pb7IbScqv5hSSlN0j63yNPCas9CCMq4I4byyeWhErpcyKAc7c4gH7s+v0qKxHl3tv8Eov2e5H1DbYPl0IriJlewgl2w8jzSENotvifeBk2oiKimMq2InStwvNUDWBx+iUBETEGJhaEgAGM4YRin5HY8JpKbfbMKMb5u0PklUkQToXAp8GJbDXsO7YHsaIAwE4mqPTdcps+zmjXA/IXn7bjJQnhO9KvSwhOHpMBatR7A55mTrlldip+2YP9JC9lANhH6STGFABfxX5LusniM3O2hrVk2shoiSueoGvAwRmokaYOkZXArVDjeHbxZDDTAU3bDyOXgJBLh29ajSygDs4vsbqL2MADqWjHvF0q+9f2tMoKDyBF6teLWqPneGKJMjQ1zK4zT+wdsGv+dy6QTQi7zFC52Ol6RFYv3zyuT3krv9JkoaY906aZoCe5Jqg/a6vctFNIdvb6WTpUhgurwtmC9bfIBpGA566gmvqD3bfzbm4uLfNX6VCqxsjREgQfUdbZQNFpusBWXoyTwKTpcxZQ1BU/oF6YQYoYB1uDHKNntmnj8i6O9ENnV/vowdkSe605PppSMrvCpvgoJolMJBo2rAnDQUwhocCt/PrKUJFX5NPlz8BiDobEeXGOCXafG0xc6+k8GiJd2TOmIP2qOEUAMkJz+vlUu59+6DgEwWpjs54npc6IubyLTMHwJ0lt2Bq4TK00Wy5bNjS2r2FxIpSVDj822UgA9vDDSH0Oif4W1+f3D624TU6YyOVQ9XMs8gSkSlW8pf5tkZILgAG85wh5oC9N7hlB5oglZwpp99RAjwEEWrmQd+7iyWiPOVogCtBdAqpwM2svD5C4+vrtagl9gl,iv:Lb221epZ45ooDQ9k36FkyqNaoCMLjH6NUA+cHDtlbqc=,tag:2RysfJ10asU60fbL86+4ww==,type:str]
    key: ENC[AES256_GCM,data:Ce5/tBXXtj+OnWtRsREAWaGDQdx0Lo0stxcd0e4ckv6UV2D+rNNHeNDtSunpLC8WQKywzroVCqM10TiUzevx0WEHHdk82eHh2YdNjYt0erFKK1ZQmIiEmhtqF6nhvEYvVB9ROVjZIk4oBAVqgueYS00eGPXA4TGcw7KXuDH/si4IvsDg3+zcBDis1WPJZYqpSYuEOqsssiHBKeYhLHRpdpRI5ZKlU7zLu7R+OJNNROjswffT9dIczn+J1sP37yn3PkCrxqGoaf2z3FC7hxTerU8nnihDUeo/J5rFlfqCIH7FJu2D/E9+X/eucz8AUyIYMqAYwCBQpQkioYiOMUej+sR1Lkn5e+q8gjKkOWASLZLXvT4wNUXw3FYK06HwmOsHxDCE8jjNseJIjJLCfzwtnA==,iv:NyEr3H/pgalJdmtXrP83zycEGfhwg3+RIdnaMbXuT7o=,tag:yS29kCG+XEnjpvmEN8158A==,type:str]
  serviceAccount:
    key: ENC[AES256_GCM,data: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,iv:w2zZ/TOwIqTwFJw01vckBCXGikTywTGeTiI3gzkVDUc=,tag:NGkPFh04BkhqxqTlaVFElg==,type:str]
  apiServer:
    image: registry.k8s.io/kube-apiserver:{{ ENV.KUBERNETES_VERSION }}
    extraArgs:
      runtime-config: admissionregistration.k8s.io/v1alpha1=true
      feature-gates: MutatingAdmissionPolicy=true
    certSANs:
      - 127.0.0.1
      - 10.1.20.120
    disablePodSecurityPolicy: true
    auditPolicy:
      apiVersion: audit.k8s.io/v1
      kind: Policy
      rules:
        - level: Metadata
  controllerManager:
    image: registry.k8s.io/kube-controller-manager:{{ ENV.KUBERNETES_VERSION }}
    extraArgs:
      bind-address: 0.0.0.0
  proxy:
    disabled: true
  scheduler:
    image: registry.k8s.io/kube-scheduler:{{ ENV.KUBERNETES_VERSION }}
    extraArgs:
      bind-address: 0.0.0.0
    config:
      apiVersion: kubescheduler.config.k8s.io/v1
      kind: KubeSchedulerConfiguration
      profiles:
        - schedulerName: default-scheduler
          plugins:
            score:
              disabled:
                - name: ImageLocality
          pluginConfig:
            - name: PodTopologySpread
              args:
                defaultingType: List
                defaultConstraints:
                  - maxSkew: 1
                    topologyKey: kubernetes.io/hostname
                    whenUnsatisfiable: ScheduleAnyway
  discovery:
    enabled: true
    registries:
      kubernetes:
        disabled: false
      service:
        disabled: true
  etcd:
    ca:
      crt: ENC[AES256_GCM,data:7arMM67LAdl9dj/8NemT9N+1jE7+uxhENzNbFRU2bh+NIimgLnq1GgTa7Kmq2dBrhF3f/fpQb7vqD0fCgUWBX+vb2OlERTF6OicDazUyq6g3S6SRd1xE9TdOKBhkHB90860HduC+YySD9pvn5Km3RukzE7rZZ1W6QQrRc7NwmTW6h64ZLCT2hX1u1ENc1EYgv6Y+rw3ugXTHaiAtHWr4CTx1E9ioxn6GF9LMEGXoCzaT4sd4JBC9551AKRj5NWhy8CG3932J0oaxELdtMm/13LDyXwPpIu7d/ITG+ABOn30hUM7u5aGwxMVFOpG0puKn6WhUqGvXN2/2VXVVwO1kglX+EKwejkobTn24djI72rtIYmS7Knb+jJJ8T2s11lAnfp15eRoP2rrAE5QsuPTjMDjH3R9nI8mGkofRabyx4lfaL0JyjR+PiuMQZjiYpafMD3NrNd8XVwya8ktjoQdWBS/anhY0oD2PN7hPaW5OtTXps/di5jYp/fC1quWzdoRJXPpVJ/7Ph0FADo78y0g8uFWqpzO+lNafYcb8eeV7A0OeMbwnkOcZsOrBUm65sdnSnnU6ulgNN+VBPwvn7TtY+G7sXP3fjN3lwabObZfpW39r2fBH3EB/doL6IlGfDqwLU65ASXPvizloXis8pDhXeks8DXYrgx1xm33ASCmZV1f3ayH8vrG9ITY/AKzN5Cbjo9BLF+csYKoU/Zim9LYum7ZC0aJ77fDCFAaGpw8PALMk1fn4PgOzbjG7hzcmNLY6wmLXKjTPp7lXwgG0KMRdq8Dy/OgCoNwSpPVma9ERAtlJl8IpBcAnd+pMwTk8bYJPEGBudnWdqnBjVU2876peJr4TYiFA/bLkNQJbBzLrJ2A+SCxCHSdBRSztH2ireZrEHiiTA4i7KcZpZMGeOB6mQOI3DzmTjGZ9+nS0JMVLVgfTyTba/eHJztjrq1SZRIRCsXYd3ZjPbM04S1IN146uQYi6poEUMH6FYkljPYkGIxPH3/E1GH9haP8YwKLmh+Dv,iv:5JKoOkjK8pMZh8dCEFSvNClgItIHlkltkIaA2Xzfkzs=,tag:14n2w+Qw1RmdWMVvj+3nCQ==,type:str]
      key: ENC[AES256_GCM,data:T/GAGZ5yLaAcIgsuSiPzRf+MMNqonaMUGP0Tp6B6C9Sf89ZvYpve7o2qkfShbgpbBO89Ic/8yJj3/Y3idZFhjxlfYDwE02WevaitAqjisUr8HmHZtAOYghWRlyoluC5l9FnJgS21iS18ubC7ymTxkboh9Ix+7U/oUUah04OIBljA+BIPkB5l/iB1QtAVEK1FmQQ/pvr1qIrW6BPjlUniMrzM+AXGHrv2xTFZgZXDG1xMoOUqx6UIqL0Imkllczy+lJBMKLH9yKSy21Ejd+TprQfYpoQqwTmmzwmzd13MklfCbjyXmSn/NMDJ+aK19ZN9QQ1QFcW1Uwv7p1WkWfGoZ2LQu9hYjCWO4kA004Hxv9ArCCGYyokmpjS8s4arNrZuwmqr4ANUCUDnni5DGar0Qg==,iv:qYBWJhuxtDF8uIjwVIq8KJgHrwwPWZA6NIIGnd8l8Bk=,tag:BVKXz4IUdMLHQUdVuD8XfA==,type:str]
    extraArgs:
      listen-metrics-urls: http://0.0.0.0:2381
    advertisedSubnets:
      - 10.1.20.0/24
  allowSchedulingOnControlPlanes: true
sops:
  kms: []
  gcp_kms: []
  azure_kv: []
  hc_vault: []
  age:
    - recipient: age1jwm8ccjgfy04r9rwh65rehk72j6rkawkpjnf4rcu4ukwlcfyquhq4p2q23
      enc: |
        -----BEGIN AGE ENCRYPTED FILE-----
        YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBKQlk1L0I2cHk5dzhoRGFw
        bVBFczRJcDQvVjM0bWlmMHJrckUybG5qSkR3Cmh0WkErYldscjM4ei91VGg2cjV1
        Um1uSGI1RXRoMEhnbEU0Zk5hWGVxR2MKLS0tIHlOWnBqK1U1Ym8vbGtoT1VEbUFu
        T1h0WUJKMVJ6N3dydmhrUjd2N2FRQmsKS/luy9oeHMq10mzJlT5w9Ps3/3sdH3O+
        xEvWWxVMRecuXy/oAHvL+9F4JexspbdRaAXPrP5FKxW3cdJIUq8DuA==
        -----END AGE ENCRYPTED FILE-----
  lastmodified: "2025-01-29T05:00:43Z"
  mac: ENC[AES256_GCM,data:73alzwr/g3jP+xti4WoVgDq/JT4DhB0+wMAF5t9VNizUdoNI3cE3kYeIr2ta0oMOyB0qBKBhTp/oLDdWO7QVEYdau8522vo37aZ2oBMEZfulTeaUPZelrdR26mR/5V5tFjIhqSDpdGy/zMQ3nkNGzikf/A7Fg1phX0r8HcHYoOk=,iv:/YydAJjSXOTmri0mwcJg4VF+JnGMkU6PgUI9/Ab/9c8=,tag:QCrx16gGtBMi+K8htPKqAA==,type:str]
  pgp: []
  encrypted_regex: ^(token|crt|key|id|secret|secretboxEncryptionSecret|ca)$
  mac_only_encrypted: true
  version: 3.9.3
