version: v1alpha1
debug: false
persist: true
machine:
  type: controlplane
  token: ENC[AES256_GCM,data:oIvLe3qKoSulgZw1RaHrTxnGqUIglKg=,iv:EIq4VUMLBeoiJwPpDmgzV8pvqOKHQJ3i9OZk4uPUkvY=,tag:KC/IEWTKL3FGsi/Y1Hx7rQ==,type:str]
  ca:
    crt: ENC[AES256_GCM,data:I+85n3yPtNIjvvF9tY0vkC7bSJTxvqm3n9zL+rDofMfERxUoZ55KS598kCHDQba34sDMKn5XVw7zK11DV/sMeOQ/wRo3bu8XGnYLfIWpgiH35XrGPPo0egyMDw6P6GrjvcetR5CRPhfuwUnXXNTqj6A35Q5sOY81dyD0sjMvZEMqFCELtePewWJ8uaWnGgkDuRMqjqZIKrH19yopqqmXzSl/7/UDdxiRRpt6cbPIChsfdshs+N0ekJto708QSvNZhSj6FsBhLOEzy1+cPyE6SCJqfT789O/WhEmOSsnHhv8LkCA+0TZ2zOsZ4ATwS7iTlpzFsHUPcCYFgxdCirwxK1qFW+FNfBADZltdhJDdK7Stb67ht11I9FxOLqCtpJZQEOa4Wq60oJ3SnGYaPOTUSv+OM8WJh9E0+fL3zRe8hcGN4qAPUT79OSeFMdnTmOItphIQMrVLLZUl4vYDQkxeFwlflV3/47Sv8CZzColIy259/2MObah3bWCeJ9VcHDmI6/MuOR49e/ArOwjcuDaXqvdqppvC3q1AdBAPrfxI8BL3y3M8A2g0yFVuHkVRo8GSUGzaa9GasL1PF7yvBGGnK2/lyl6CuwF+HvyBD8sM9JlCftH9ZBefu2JdULCVYtnahpF4nGNwIPHHZ1NWKiUxbjVSurbQDc4jIGYlFwTEmUxCM+0n78uTzPKm50BCfxZmlr/t6hNYSSIor1qAueaAi1XnAs4rRAFHaL9lg56cdCpy79eXhLsFeifGJV2hu3AUk0YfM/q+Ta8mjZDPZF7+MDyVNM2vLurv+Ntf6tcJbI+akSn4CsuKxu1dWRRNe97vSGwwR5Q13odsKCsekY8Ow4D0LZo0tL2XFQS66Zy7UkA4P3wt,iv:+mkD/prwI7jZ3kd0KGQD921v2CZkVSubvGYF8xryg/M=,tag:OfW1GCNeMhvf7brRm5fcdg==,type:str]
    key: ENC[AES256_GCM,data:OZIRLcQLlzLVEOZIlsAgh6h7VUQQiFYwxES4lvR4eFmZ73EawHUzCaqJV7uMGG1VJoJy7gXjRrkaeXImzW/1g0Yx2lfeOqY5Td3Kh6LEvLiLhZM4rduoF61FgZNox5Zbihu7GB5yOTPxru+9rBaFsSwbXR5qHtsnlt8VfEW/KJ5IEadn8CRHNUktPZIn88jTDL7b9w/KQC8tbYM5f5PMwTrGaCALGIjlTOeKLCtve6hYMEB6,iv:i+hQF95MIM9yW0GpBuD5mNVDaHAB6EXn0TYkdPa7C8A=,tag:aWVX0u2I3rups8xWLMH/gg==,type:str]
  certSANs: ["127.0.0.1", "10.1.20.120"]
  kubelet:
    image: ghcr.io/siderolabs/kubelet:{{ ENV.KUBERNETES_VERSION }}
    extraConfig:
      maxPods: 150
    extraMounts:
      - destination: /var/mnt/extra
        type: bind
        source: /var/mnt/extra
        options:
          - bind
          - rshared
          - rw
    defaultRuntimeSeccompProfileEnabled: true
  network:
    nameservers:
      - 10.1.20.1
      - 10.1.20.43
    hostname: k8s-2
    interfaces:
      - interface: eth0
        dhcp: false
        addresses:
          - 10.1.20.12/24
        routes:
          - network: 0.0.0.0/0
            gateway: 10.1.20.1
        mtu: 1500
        vip:
          ip: 10.1.20.120
        vlans:
          # Services Network
          - vlanId: 30
            dhcp: false
            addresses:
              - 10.1.30.12/24
            routes:
              - network: 0.0.0.0/0
                gateway: 10.1.30.1
            mtu: 1500
          # Trusted Network
          - vlanId: 40
            dhcp: false
            addresses:
              - 10.1.40.12/24
            routes:
              - network: 0.0.0.0/0
                gateway: 10.1.40.1
    disableSearchDomain: true
  time:
    servers:
      - 10.1.20.1
  install:
    disk: /dev/nvme0n1
    extraKernelArgs:
      # Use eth0 instead of eno1
      - net.ifnames=0
      # Less security, faster puter
      - apparmor=0
      # Less security, faster puter
      - init_on_alloc=0
      # Less security, faster puter
      - init_on_free=0
      # PCI Passthrough
      - intel_iommu=on
      # PCI Passthrough
      - iommu=pt
      # Less security, faster puter
      - mitigations=off
      # Less security, faster puter
      - security=none
    # gasket, mei, intel ucode, i915 driver
    image: factory.talos.dev/installer/6e6f23cd5ca6099bbe4be57a2218f628e61314545d5da36dcc6516c59d3be64f:{{ ENV.TALOS_VERSION }}
    wipe: false
  files:
    - op: create
      path: /etc/cri/conf.d/20-customization.part
      content: |
        [plugins."io.containerd.cri.v1.images"]
          discard_unpacked_layers = false
    - op: overwrite
      path: /etc/nfsmount.conf
      permissions: 420
      content: |
        [ NFSMount_Global_Options ]
        nfsvers=4.2
        hard=True
        nconnect=16
        noatime=True
  sysctls:
    # Watchdog
    fs.inotify.max_user_instances: 8192
    # Watchdog
    fs.inotify.max_user_watches: 1048576
    # Cloudflared / QUIC
    net.core.rmem_max: 67108864
    # Cloudflared / QUIC
    net.core.wmem_max: 67108864
    # 1Gb/s
    net.core.default_qdisc: fq
    # 1Gb/s | Jumbo frames
    net.ipv4.tcp_mtu_probing: 1
    net.ipv4.tcp_congestion_control: bbr
    # 1Gb/s
    net.ipv4.tcp_window_scaling: 1
    # postgresql
    vm.nr_hugepages: 1024
  # sysfs:
  #   devices.system.cpu.intel_pstate.hwp_dynamic_boost: 1
  #   devices.system.cpu.cpu0.cpufreq.energy_performance_preference: balance_performance
  #   devices.system.cpu.cpu1.cpufreq.energy_performance_preference: balance_performance
  #   devices.system.cpu.cpu2.cpufreq.energy_performance_preference: balance_performance
  #   devices.system.cpu.cpu3.cpufreq.energy_performance_preference: balance_performance
  features:
    rbac: true
    stableHostname: true
    kubernetesTalosAPIAccess:
      enabled: true
      allowedRoles:
        - os:admin
      allowedKubernetesNamespaces:
        - system-upgrade
        - actions-runner-system
    apidCheckExtKeyUsage: true
    diskQuotaSupport: true
    kubePrism:
      enabled: true
      port: 7445
    hostDNS:
      enabled: true
      resolveMemberNames: true
      forwardKubeDNSToHost: false
  udev:
    rules:
      # Thunderbolt
      - ACTION=="add", SUBSYSTEM=="thunderbolt", ATTR{authorized}=="0", ATTR{authorized}="1"
      # Coral Edge M.2 TPU
      - SUBSYSTEM=="apex", KERNEL=="apex*", GROUP="44", MODE="0660"
      # Intel GPU
      - SUBSYSTEM=="drm", KERNEL=="renderD*", GROUP="44", MODE="0660"
  nodeLabels:
    topology.kubernetes.io/region: main
    topology.kubernetes.io/zone: m
cluster:
  id: ENC[AES256_GCM,data:xfuueD1RduWEhq2M4YxWi4HNbiuqUflY4hyajtb7KhYv7RIVZCiTcXkroSg=,iv:ptE2u5Zsfho6ImyzKCZB2UNHgl4IXa46Pd0J3w1NHW0=,tag:8Dz7brg9iX/ILTwt/aLwVw==,type:str]
  secret: ENC[AES256_GCM,data:tqK5RQDaWs7qp9PMFyuOMu2XUVt/k6jiOSYv+imPf6i8NQ+5/P4aCZb75mU=,iv:AjawCWypFi2gOupW/vS8NFx2kpzb2aaNVP+zK/uhtiY=,tag:/EBzFM35Z4/4nWutGSTq3w==,type:str]
  controlPlane:
    endpoint: https://10.1.20.120:6443
  clusterName: main
  network:
    cni:
      name: none
    dnsDomain: cluster.local
    podSubnets:
      - 10.42.0.0/16
    serviceSubnets:
      - 10.43.0.0/16
  coreDNS:
    disabled: true
  token: ENC[AES256_GCM,data:YOf6vF4wttI+aQupbcZlp94kkKxyOAk=,iv:GHDuZE3J5ol2ePwjH3LfIli2Q7L5HFwIF7iK/ZghOVc=,tag:jZDuM11Ft2xTkYQVRkGCCQ==,type:str]
  secretboxEncryptionSecret: ENC[AES256_GCM,data:FsmezXIaNd1w0sH3diWyHDnW0wkUvlBfiC9GH/pL0FBoxdsrcy30YFd1PMI=,iv:TFy2oQBYzcaUmnrWap5MeFXvkXiluQt1a8Z6u0uFUtk=,tag:/fe/wgZBgs6+5FYlywXWBg==,type:str]
  ca:
    crt: ENC[AES256_GCM,data:GFD1h7E+OTFbJxzENQ/BXtsbum8wcyER1KK2ph3ZE6BfhZOuK9jz7dyE7YafjIkaglIkpJjU3NELCShLVNEZ7CYzQSFElV37xOSTawgVwrYQksP0cSbhoFzzaEjs4fhe9YE/SfxpSfsxY+I3fwwZK2Ym5uYniZoOYQMT10kp8Ns4PoscWwqzV61ZopPwZJIriLnlcKEDVWAd2ipkPgNkyB3uRFoHiWurHhaRxHvCeJEG8p49q3apX9mUnEDcv4xqSvwL66K0Mnd3kXOgcagThMU3rReDfepA4tn2QRR9qqkJVZCWo6ImyxAvX4VBUXQdgI83uHKZgXIWHpUbgMaI+gvTQ1rJz26ocub++v5u/2bK+vacaqBbcs5nENo/Ea1qjplcc/UmTqwvdSTkacFsR1ZLidZys2JPjTM7a/asEK5SWBHtVTP0CvErCQ9CFcvTg7/ZuiV4ZC+sh/JKIC0DR3ZZ5vbbzZ5XVwfPiFI1n7Msi1aLs80yJguZgV26hFTUdZAvXdzzSntx7nRhxrll2HM9i731RG4WeNbmNKzDbrKmeS1VHRzkIzYubNMYCfTw3Exg8Y22IZxECLa97AQdUf6nU0ddE35H7NKSI4gMnMtMp1AYfWwAfCw0SNtTmtmGKkhOUvEfeEYNZNmbgbP9Wz2pjSYxgMAT0YnRvvdB99ZiD47oe4kGl4M5CEXCt1Rc3vfNhy0FSQwqtj74R/MzNjUH8n+mbTIvkpzimKkKyGVWVjwXEf16HwP09WHUFZcekRONa+cO+ct4uuGEUErCLnvHqEPWRpcwEFmU5i3ysyOI8QjYnkYLw3LKnfIcQ1CWNPPUnCZGEHEti2YTH9+7K+LTFIWi1W5IsVwb7ueXUd4IQVs1e71qxjqvycAAagnRdRtIFdu+7XWeMh5ufeR20zUElUF6F337Mipmz0YtLKJ8uGeaCYA2NGUH3tXmbvdO+IHjnXJg2ArrKkb2eErbgLr3CkBmv/NaM0fNu3sStFVICokaw3MoAK8ghWthxMb3qrG4Gbwik4Og9jmIJ/O79IRTPsY=,iv:jtCAxaekq89Uk4UIlf5Mk7driV7ZPdJkXHc5FDha+XU=,tag:8PfIaAYPAnC3D7GFqnG7CQ==,type:str]
    key: ENC[AES256_GCM,data:+sJlrIch08AzRcbZ8Jm4CyRcN3VnHMEJOOJufjJrucdpVNsJ9jAlb4NqdFtx/UnUyRX+QIJFuYzWZVd/iUBAHff4BjvUrg+fHXa26xeZXXc//EKYhXyaWwJ5dFfdSblpuYnSHdDR6BEqD+wkM0is7AAsrloumKBsdqXPmBn5HJriu9kyU49YsGOE6wMUkVL+pgTQzsNebeN/f9e02GCUD8DXjNfjfpBN0lqSzvLbtuAM0Ey3HZ3P4ALqPQkckd0nmYg8X3SuxmAEOOmJNNbBH5K8CEc00CICG7qdoOmnQaan9yIsCqdaxhEWzxOsXZukbmZprsrZ95XHQLGjLIsUFMA5fF7qhzYKmrxd0zU9XPsPLztam0p1lmrTJ8gSxQHebwkIVJ8GTYAFJzdJ1nSPdA==,iv:iNjSWBlNOAaMR0niDl+/SRel4qCoPLxrBm0ow9Uu1OM=,tag:AOxpzclVCT0MO7pRI0kj1g==,type:str]
  aggregatorCA:
    crt: ENC[AES256_GCM,data:xVg+FKGriWGWRHyZA4btLP9z4cytyfS3iF0+H9KQlCCNnfGQ55URyML7eSOVuBLAFA6NTQjkXatpqNEsLcAsXGdk5cF44vX0QplWEcTmHtEKWJybl89EmvREIX6EhsjHaU34y10HGCcv0tf0UEYgCvEBKjquN6EufODMPA818w/clFW3RRDV6GDqlG4i3hzykjjRh8XyfO81vBF61nH6Uy6E38JwBF7GP0VE5ifPUJs8wvvPGB5/3cWfDla8nngm1c6ajEnt2y382YnS4nJxvx+1oFkLI+QztL3vIMy3je53BihZXbHcEM+C701yexXyBK+s/5ba42eaTtgPq/RHDWnizIj9TN19fC82MCK7Oeu0IWI8kpfgBPmWes/1zB9aszZ2u4qWXpvxjaMyH71d9EBG+AH9b21qdz4oJq8tHt1ji5cCmHwKHOIy3EsSzVDGeWvJ+1aJri/6AskGj12fZ+1r6N42rTV0/xRL5x2rqKo8yyJolqY2cWV11fuzekmmlU2kL7hEbb9IYcLAMrUCf6M5N8eEwLstZqBasl9XAyZt7b58c2NHWQe8+TX77hxLErvGrM9a4qw0+iGpK97md0rAyAmUp+pvMxIjhAp9+eyk2U5T7aiaR5G/cfhWbepoo6VDEybP0hsGLZH2cq0o79lmMUh1w5mUZ94z4qdXA9c22+8UnxFtNQCsMnmlEt8bf7bEIfCju9xGPvZUPVWxHZHAp4t+edMPIWwvTMb2jARN9hO+IGGUUhC/vfaMXVNqLIe7TEqQyJMGhedw9iBZQ+o+bezvt5Ai2tGNXE2iOdgHfh3gRbW6y8Ympa5Gw4RURgI9nprhChk2FAZyv+7+pFsduYX60ZmroPeAJd7Nn7ZqvwXCDMtjpr/C5yw+7HqSJimS/jMe7fEDDfo5x4iSmibiCg1vODTxr5mAsW+M7NPMisccXk0nM6NJlr7DrE1q,iv:F8MtFZqbpfgZoVUR5nrTrV1lAnbgRxEKBwtmAEDHrKc=,tag:HppGy7pILignVjpgo9Qp/g==,type:str]
    key: ENC[AES256_GCM,data:+WLxPKP/yomYQaGsEwzP3gTo4BzkhQVV4YseaKw07FXQgrrO4X6CmuF10RiV6r1EO5NcKSsIFujrlvhWw2ltDRYG++gGhz5aaixzLUtv79SvDNxCKVKNsJsYej2fkPFCoRfIgSssbn/hfsPTkjPTKCJmSCHuwXN7Q/k7z3PdqIqaBU7hbG4r6AtMcbcPXkSrtKoe+1ecqICHN9x5BXMBtTKk89ycwt2g7iQI+YeNnZHhRzdS+SMm1/KtM0Xr6O4LfEuvOlncqDNwoOh3vImjum00US0XvBfblMaF9phpIuQEFQqXrQ1qAqwvF/pgOyE4HyWgLQokb4m2Hub7bzCTJ7+efJFs88Aoa5u3hPbRYzFtzD6Xcczx4MTWvvRXU8uB0xNcLJrqgPsKlbaw63TUyw==,iv:5mGXDM6mV/2uI0i6WJlxIiveL4Iu7N6po32IzchJOmQ=,tag:DYag3Blb47ExMMI7xy2dKg==,type:str]
  serviceAccount:
    key: ENC[AES256_GCM,data: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,iv:Y6iUTqP5Ic8z0l1d/MXPjv0YNehPK9GvB7hL2/E7VMc=,tag:xokRXcxfaOUaDW46UPjOAw==,type:str]
  apiServer:
    image: registry.k8s.io/kube-apiserver:{{ ENV.KUBERNETES_VERSION }}
    extraArgs:
      runtime-config: admissionregistration.k8s.io/v1alpha1=true
      feature-gates: MutatingAdmissionPolicy=true
    certSANs: ["127.0.0.1", "10.1.20.120"]
    disablePodSecurityPolicy: true
    auditPolicy:
      apiVersion: audit.k8s.io/v1
      kind: Policy
      rules:
        - level: Metadata
  controllerManager:
    image: registry.k8s.io/kube-controller-manager:{{ ENV.KUBERNETES_VERSION }}
    extraArgs:
      bind-address: 0.0.0.0
  proxy:
    disabled: true
  scheduler:
    image: registry.k8s.io/kube-scheduler:{{ ENV.KUBERNETES_VERSION }}
    extraArgs:
      bind-address: 0.0.0.0
    config:
      apiVersion: kubescheduler.config.k8s.io/v1
      kind: KubeSchedulerConfiguration
      profiles:
        - schedulerName: default-scheduler
          plugins:
            score:
              disabled:
                - name: ImageLocality
          pluginConfig:
            - name: PodTopologySpread
              args:
                defaultingType: List
                defaultConstraints:
                  - maxSkew: 1
                    topologyKey: kubernetes.io/hostname
                    whenUnsatisfiable: ScheduleAnyway
  discovery:
    enabled: true
    registries:
      kubernetes:
        disabled: false
      service:
        disabled: true
  etcd:
    ca:
      crt: ENC[AES256_GCM,data:Y+tGTOUuJ2u7vwY65Vb5MLgt6mBEoplw6NphDbn6Lhs7Fe4xdHKAtDWPwP9SaxWyojChVU0r7GaaulNefoo5IfdObpILV4x4q968M8Im7eQH7/V+fL11eIKHcLWsxda/ddDEWMefcFNvOSdtk/HgnV9xEklIH7ib7+fzZxROrSK4BVwTU2A4Qg597Mhqco7V4iHHZfq24tWJsH6Z1xJHMhr65P/ActGolP8Mwurhmg3UBBYlI3rTMOiXMEQk8OL4MSSyoTlEu4msETiemuYILM6428gdzB3GPZ6ATsZVDYvRlB3PsYknpFiSiOw8gdVe2vDvsSeH12PfcCYmHL4PZ5koi1YF1Xh7nHSJeWuEUVe8e+24ZfkssTwv+6i6b8RvDZTXLDEInqnyY3MyK34wW13XMogyc8ZXN5wsvMd4vRgb3uD7mPYIiDfOqVZNM+cJpyNHs0DSBYQP4LxtQJrDanh7/TPaAS2xMPtEQgC0wx/82X08ZG5FDcrJdBrLl7bEtZ9FvqEZBgWrcS/r2e0HJ7cMm0QX7Cw1hg6LugARQoNLvJvK6Wq0iCS0eXYILmc8Pf6gbUK/hYNWmslC5uVOf0wWS6Qa8t1xsVEkTGF3oHhFJuAb5mKUW2HCq+xc3D/Serm/xR0X64jbHX8kjpnDIxjHQ5Z1ty2aMyJIpB8nJIgE30TSMHadzm15Do8e5P7fUlOH5mPRmH1I1U650uO52r0nnljatrdWu0dUy7CjtPF8J4dxdJeDnq4ev7YQ9QfEh9lI205wtV34N2fPwBBxy51lxTQCO6aDUb62tT18mO0DS/n0uk4EjOqyi2vwv1jsd/z+0XcKnpBr5oqoonKmk1Q2UWKeuivOXZCBwD5zeIA1SA7fkc+tdL4UzT6tWeP54zDB2IWA4cv17usquiUphG/LTLXBgK+nPD28QiuyuY13jtRfkTFc3s8whoRC4x95IfbRYC49si4XdRMRl8sz5ccDdf3rnz4s6WchdK7RnkWtIluR1qLTX4YtaZYPkW7h,iv:Bffymk+jXuQeOY/VjJFmLtTPfTISqmfY1jgZn3UNJiQ=,tag:AgkhPb1KYyvo1mIdzVriAA==,type:str]
      key: ENC[AES256_GCM,data:weMu5eAxuOmoTLrw5/coDVTKxkWWhuMXY0e0qXEjSNR6IDN+Jsv7i7wb3P0M/OInc3jH6OhRcUNobCj11hEFR1VcpdhVjofUipSrQFijQrrilZlspkf6QyVGLcGHGm2SmtoKuDoWFWij3GNBeb6TcsC6Pe450ilKxtoShNRolCrZCRrRGHRscODdYSSoUsfWMk1yZizVi2lPTo6jHoN+x8lpB+bF8CDuXQK60WNHrywj3BV12xZM7427LysEEtjq6CDgDZzBe8CqSWnbhqrHtJfxGy3dz/s1WzROlzAnonHftINVzbAsIyedy7F7f33FDOfgjT9VUHosVAsO9o8eQl/eSj/06OAE5TnRcH3CaAHo0K1grfWWnlMtBro6L1m0wJIGiKT5QBaHTAGSQEc8dg==,iv:bh28JE3eINu6Detna9k9R9tz8ygx+qhDe5WaGp+6CMo=,tag:GEIRWkdqAwHVtAkqjtV8gg==,type:str]
    extraArgs:
      listen-metrics-urls: http://0.0.0.0:2381
    advertisedSubnets:
      - 10.1.20.0/24
  allowSchedulingOnControlPlanes: true
sops:
  kms: []
  gcp_kms: []
  azure_kv: []
  hc_vault: []
  age:
    - recipient: age1jwm8ccjgfy04r9rwh65rehk72j6rkawkpjnf4rcu4ukwlcfyquhq4p2q23
      enc: |
        -----BEGIN AGE ENCRYPTED FILE-----
        YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBESGY2UU5OajJFM1BRUWo5
        ZlVOaFpLQ0pBNnlybWZZVDRjNVRUY1VIajFnClM0Y3ZnQ3Zrbk5xNHNhTHpISGxQ
        Q2Zsa1dCM3diNlA0M25KamtWRXMwUEUKLS0tIE00cWVIbWk1dDM2U2wveGRicXB6
        NkJkYUswK1lMUHUzSStOUFgxQ245T2cK8it+uHe6q7GQpdPycf1yyIvJvcisk7oy
        zv+2GYnMBupYB/oxB2lBoEYlotJtRWQ2C52ecyr0ObIicVbEmHzfMA==
        -----END AGE ENCRYPTED FILE-----
  lastmodified: "2025-01-20T17:09:36Z"
  mac: ENC[AES256_GCM,data:YEbi2Tf/ONL2KoWR/jBQAfHorHM5OKJ14zqfVhAPJsoDgRWktY4dhHEZZu3Rj12zdBfBXXi1y5fpctYwK6xVFcfVohYUJxxXSowNvjXKHnIxMgE0V3mN8IkyOvwCm1fIEwNdu/TFJp20RXWwcZl5gSbqcQQLQ5ZF0/6f2t6o7gQ=,iv:a+76UFvkDe29YhqvbOGdggGtlGnu2viLisTLo1rsPyM=,tag:zNEWBqAp2wTRyPKXCKL5TQ==,type:str]
  pgp: []
  encrypted_regex: ^(token|crt|key|id|secret|secretboxEncryptionSecret|ca)$
  mac_only_encrypted: true
  version: 3.9.3
